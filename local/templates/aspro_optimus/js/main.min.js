function setLocationSKU(e) {
    var t = parseUrlQuery(),
        a = 0,
        i = "",
        o = "",
        n = "";
    if ("oid" in t && parseInt(t.oid) > 0) {
        t.oid = e;
        for (var s in t) parseInt(a) > 0 && (i = "&"), o = o + i + s + "=" + t[s], a++;
        o && (n = location.pathname + "?" + o);
        try {
            return void history.pushState(null, null, n)
        } catch (r) {}
        location.hash = "#" + n.substr(1)
    }
}

function clearViewedProduct() {
    try {
        var e = arOptimusOptions.SITE_ID,
            t = "OPTIMUS_VIEWED_ITEMS_" + e,
            a = {
                path: "/",
                expires: 30
            };
        "undefined" != typeof BX.localStorage && BX.localStorage.set(t, {}, 0), $.removeCookie(t, a)
    } catch (i) {
        console.error(i)
    }
}

function setViewedProduct(e, t) {
    try {
        var a = $.cookie.json;
        $.cookie.json = !0;
        var i = arOptimusOptions.SITE_ID,
            o = "OPTIMUS_VIEWED_ITEMS_" + i,
            n = {
                path: "/",
                expires: 30
            };
        if ("undefined" != typeof BX.localStorage && "undefined" != typeof e && "undefined" != typeof t) {
            var s = "undefined" != typeof t.PRODUCT_ID ? t.PRODUCT_ID : e,
                r = BX.localStorage.get(o) ? BX.localStorage.get(o) : {},
                c = $.cookie(o) ? $.cookie(o) : {},
                d = 0;
            for (var l in r) r[l].IS_LAST = !1, "undefined" == typeof c[l] && delete r[l];
            for (var l in c) "undefined" == typeof r[l] && delete c[l];
            for (var l in c) d++;
            "undefined" != typeof r[s] && r[s].ID != e && (delete r[s], delete c[s]), delete r[2243], delete c[2243];
            var u = (new Date).getTime();
            t.ID = e, t.ACTIVE_FROM = u, t.IS_LAST = !0, r[s] = t, c[s] = [u.toString(), t.PICTURE_ID], $.cookie(o, c, n), BX.localStorage.set(o, r, 2592e3)
        }
    } catch (p) {
        console.error(p)
    } finally {
        $.cookie.json = a
    }
}

function initSelects(e) {
    var t = navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? !0 : !1;
    if (!t && !$("#bx-soa-order").length) {
        $(e).find(".wrapper select:visible").ikSelect({
            syntax: '<div class="ik_select_link"> 						<span class="ik_select_link_text"></span> 						<div class="trigger"></div> 					</div> 					<div class="ik_select_dropdown"> 						<div class="ik_select_list"> 						</div> 					</div>',
            dynamicWidth: !0,
            ddMaxHeight: 112,
            customClass: "common_select",
            onShow: function(e) {
                e.$dropdown.css("top", parseFloat(e.$dropdown.css("top")) - 5 + "px"), e.$dropdown.outerWidth() < e.$link.outerWidth() && e.$dropdown.css("width", e.$link.outerWidth()), e.$dropdown.outerWidth() > e.$link.outerWidth() && e.$dropdown.css("width", e.$link.outerWidth());
                var t = 0,
                    a = 0;
                e.$dropdown.css("left", e.$link.offset().left), $(e.$listInnerUl).find("li").each(function() {
                    $(this).hasClass("ik_select_option_disabled") || (++t, a += $(this).outerHeight())
                }), 112 > a ? e.$listInner.css("height", "auto") : e.$listInner.css("height", "112px"), e.$link.addClass("opened"), e.$listInner.addClass("scroller")
            },
            onHide: function(e) {
                e.$link.removeClass("opened")
            }
        });
        var a;
        $(window).on("resize", function() {
            clearTimeout(a), a = setTimeout(function() {
                var e = "";
                (e = $(".common_select-link.opened + select").ikSelect().data("plugin_ikSelect")) && e.$dropdown.css("left", e.$link.offset().left + "px")
            }, 20)
        })
    }
}

function initHoverBlock(e) {}

function setStatusButton() {
    $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/getAjaxBasket.php",
        type: "POST",
        success: function(e) {
            if (e.BASKET)
                for (var t in e.BASKET) $(".to-cart[data-item=" + e.BASKET[t] + "]").hide(), $(".counter_block[data-item=" + e.BASKET[t] + "]").hide(), $(".in-cart[data-item=" + e.BASKET[t] + "]").show(), $(".in-cart[data-item=" + e.BASKET[t] + "]").closest(".button_block").addClass("wide");
            if (e.DELAY)
                for (var t in e.DELAY) $(".wish_item.to[data-item=" + e.DELAY[t] + "]").hide(), $(".wish_item.in[data-item=" + e.DELAY[t] + "]").show(), $(".wish_item[data-item=" + e.DELAY[t] + "]").find(".value.added").length && ($(".wish_item[data-item=" + e.DELAY[t] + "]").addClass("added"), $(".wish_item[data-item=" + e.DELAY[t] + "]").find(".value").hide(), $(".wish_item[data-item=" + e.DELAY[t] + "]").find(".value.added").show());
            if (e.SUBSCRIBE)
                for (var t in e.SUBSCRIBE) $(".to-subscribe[data-item=" + e.SUBSCRIBE[t] + "]").hide(), $(".in-subscribe[data-item=" + e.SUBSCRIBE[t] + "]").show();
            if (e.COMPARE)
                for (var t in e.COMPARE) $(".compare_item.to[data-item=" + e.COMPARE[t] + "]").hide(), $(".compare_item.in[data-item=" + e.COMPARE[t] + "]").show(), $(".compare_item[data-item=" + e.COMPARE[t] + "]").find(".value.added").length && ($(".compare_item[data-item=" + e.COMPARE[t] + "]").find(".value").hide(), $(".compare_item[data-item=" + e.COMPARE[t] + "]").find(".value.added").show())
        }
    })
}

function scroll_block(e) {
    var t = e.offset().top;
    $("header").outerHeight(!0, !0);
    if ($(".stores_tab").length) $(".stores_tab").addClass("current").siblings().removeClass("current");
    else if ($(".prices_tab").addClass("current").siblings().removeClass("current"), $(".prices_tab .opener").length && !$(".prices_tab .opener .opened").length) {
        var a = $(".prices_tab .opener").first();
        a.find(".opener_icon").addClass("opened"), a.parents("tr").addClass("nb"), a.parents("tr").next(".offer_stores").find(".stores_block_wrap").slideDown(200)
    }
    $("html,body").animate({
        scrollTop: t - 30
    }, 150)
}

function replaceBasketPopup(e) {
    "undefined" != typeof e && (e.w.hide(), e.o.hide())
}

function waitLayer(e, t) {
    "undefined" != typeof dataLayer ? "function" == typeof t && t() : setTimeout(function() {
        waitLayer(e, t)
    }, e)
}

function checkCounters(e) {
    return "undefined" != typeof e ? "google" == e && "Y" == arOptimusOptions.COUNTERS.GOOGLE_ECOMERCE && arOptimusOptions.COUNTERS.GOOGLE_COUNTER > 0 ? !0 : "yandex" == e && "Y" == arOptimusOptions.COUNTERS.USE_YA_COUNTER && "Y" == arOptimusOptions.COUNTERS.YANDEX_ECOMERCE && arOptimusOptions.COUNTERS.YANDEX_COUNTER > 0 ? !0 : !1 : "Y" == arOptimusOptions.COUNTERS.USE_YA_COUNTER && "Y" == arOptimusOptions.COUNTERS.YANDEX_ECOMERCE && arOptimusOptions.COUNTERS.YANDEX_COUNTER > 0 || "Y" == arOptimusOptions.COUNTERS.GOOGLE_ECOMERCE && arOptimusOptions.COUNTERS.GOOGLE_COUNTER > 0 ? !0 : !1
}

function addBasketCounter(e) {
    if ("N" !== arOptimusOptions.COUNTERS.USE_BASKET_GOALS) {
        var t = {
            goal: "goal_basket_add",
            params: {
                id: e
            }
        };
        BX.onCustomEvent("onCounterGoals", [t])
    }
    checkCounters() && $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/goals.php",
        dataType: "json",
        type: "POST",
        data: {
            ID: e
        },
        success: function(e) {
            e && e.ID && waitLayer(100, function() {
                dataLayer.push({
                    event: arOptimusOptions.COUNTERS.GOOGLE_EVENTS.ADD2BASKET,
                    ecommerce: {
                        currencyCode: e.CURRENCY,
                        add: {
                            products: [{
                                id: e.ID,
                                name: e.NAME,
                                price: e.PRICE,
                                brand: e.BRAND,
                                category: e.CATEGORY,
                                quantity: e.QUANTITY
                            }]
                        }
                    }
                })
            })
        }
    })
}

function purchaseCounter(e, t, a) {
    checkCounters() ? $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/goals.php",
        dataType: "json",
        type: "POST",
        data: {
            ORDER_ID: e,
            TYPE: t
        },
        success: function(e) {
            var i = [];
            if (e.ITEMS)
                for (var o in e.ITEMS) i.push({
                    id: e.ITEMS[o].ID,
                    sku: e.ITEMS[o].ID,
                    name: e.ITEMS[o].NAME,
                    price: e.ITEMS[o].PRICE,
                    brand: e.ITEMS[o].BRAND,
                    category: e.ITEMS[o].CATEGORY,
                    quantity: e.ITEMS[o].QUANTITY
                });
            e.ID ? waitLayer(100, function() {
                dataLayer.push({
                    ecommerce: d = {
                        purchase: {
                            actionField: {
                                id: e.ACCOUNT_NUMBER,
                                shipping: e.PRICE_DELIVERY,
                                tax: e.TAX_VALUE,
                                list: t,
                                revenue: e.PRICE
                            },
                            products: i
                        }
                    }
                }), "undefined" != typeof a && a(d)
            }) : "undefined" != typeof a && a(!1)
        },
        error: function() {
            "undefined" != typeof a && a(!1)
        }
    }) : "undefined" != typeof a && a(!1)
}

function viewItemCounter(e, t) {
    checkCounters() && $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/goals.php",
        dataType: "json",
        type: "POST",
        data: {
            PRODUCT_ID: e,
            PRICE_ID: t
        },
        success: function(e) {
            e.ID && waitLayer(100, function() {
                dataLayer.push({
                    ecommerce: {
                        detail: {
                            products: [{
                                id: e.ID,
                                name: e.NAME,
                                price: e.PRICE,
                                brand: e.BRAND,
                                category: e.CATEGORY
                            }]
                        }
                    }
                })
            })
        }
    })
}

function checkoutCounter(e, t, a) {
    checkCounters("google") && $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/goals.php",
        dataType: "json",
        type: "POST",
        data: {
            BASKET: "Y"
        },
        success: function(a) {
            var i = [];
            if (a.ITEMS)
                for (var o in a.ITEMS) i.push({
                    id: a.ITEMS[o].ID,
                    name: a.ITEMS[o].NAME,
                    price: a.ITEMS[o].PRICE,
                    brand: a.ITEMS[o].BRAND,
                    category: a.ITEMS[o].CATEGORY,
                    quantity: a.ITEMS[o].QUANTITY
                });
            i && waitLayer(100, function() {
                dataLayer.push({
                    event: arOptimusOptions.COUNTERS.GOOGLE_EVENTS.CHECKOUT_ORDER,
                    ecommerce: {
                        actionField: {
                            step: e,
                            option: t
                        },
                        products: i
                    }
                })
            })
        }
    })
}

function delFromBasketCounter(e, t) {
    checkCounters() && $.ajax({
        url: arOptimusOptions.SITE_DIR + "ajax/goals.php",
        dataType: "json",
        type: "POST",
        data: {
            ID: e
        },
        success: function(e) {
            e.ID && waitLayer(100, function() {
                dataLayer.push({
                    event: arOptimusOptions.COUNTERS.GOOGLE_EVENTS.REMOVE_BASKET,
                    ecommerce: {
                        remove: {
                            products: [{
                                id: e.ID,
                                name: e.NAME,
                                category: e.CATEGORY
                            }]
                        }
                    }
                }), "function" == typeof t && t()
            })
        }
    })
}

function setHeightCompany() {
    $(".md-50.img").height($(".md-50.big").outerHeight() - 35)
}

function initSly() {
    var e = $(document).find(".frame"),
        t = (e.children("ul").eq(0), e.parent());
    arOptimusOptions.PAGES.CATALOG_PAGE && (e.sly({
        horizontal: 1,
        itemNav: "basic",
        smart: 1,
        mouseDragging: 0,
        touchDragging: 0,
        releaseSwing: 0,
        startAt: 0,
        scrollBar: t.find(".scrollbar"),
        scrollBy: 1,
        speed: 300,
        elasticBounds: 0,
        easing: "swing",
        dragHandle: 1,
        dynamicHandle: 1,
        clickBar: 1,
        forward: t.find(".forward"),
        backward: t.find(".backward")
    }), e.sly("reload"))
}

function createTableCompare(e, t, a) {
    try {
        var i = e.clone().removeAttr("id").addClass("clone");
        a.length ? (a.remove(), t.html(""), t.html(i)) : t.append(i)
    } catch (o) {} finally {}
}

function isRealValue(e) {
    return e && "null" !== e && "undefined" !== e
}

function rightScroll(e, t) {
    var a = BX("prop_" + e + "_" + t);
    if (a) {
        var i = parseInt(a.style.marginLeft);
        i >= 0 && (a.style.marginLeft = i - 20 + "%")
    }
}

function leftScroll(e, t) {
    var a = BX("prop_" + e + "_" + t);
    if (a) {
        var i = parseInt(a.style.marginLeft);
        0 > i && (a.style.marginLeft = i + 20 + "%")
    }
}

function touchMenu(e) {
    $(window).outerWidth() > 600 ? $(e).each(function() {
        var e = $(this);
        e.on("touchend", function(t) {
            e.find(".child").length && !e.hasClass("hover") && (t.preventDefault(), t.stopPropagation(), e.siblings().removeClass("hover"), e.addClass("hover"), $(".menu .child").css({
                display: "none"
            }), e.find(".child").css({
                display: "block"
            }))
        })
    }) : $(e).off()
}

function touchItemBlock(e) {
    $(e).each(function() {
        var e = $(this),
            t = e.closest(".catalog_item");
        e.closest(".best_block").length || e.on("touchend", function(a) {
            if (!t.hasClass("hover")) {
                a.preventDefault(), a.stopPropagation(), t.siblings().removeClass("hover"), t.siblings().blur(), t.closest(".catalog_block").find(".catalog_item").removeClass("hover"), t.addClass("hover"), t.addClass("touch");
                var i = 1 * e.closest(".tab").attr("data-hover"),
                    o = 1 * e.closest(".tab").attr("data-unhover");
                e.closest(".tab").stop().animate({
                    height: o
                }, 100), e.closest(".catalog_item").siblings().find(".buttons_block").stop().fadeOut(233), e.closest(".tab").fadeTo(100, 1), e.closest(".tab").stop().css({
                    height: i
                }), e.closest(".catalog_item").find(".buttons_block").fadeIn(450, "easeOutCirc")
            }
        })
    })
}

function touchBasket(e) {
    "N" !== arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART && ($(window).outerWidth() > 600 ? $(document).find(e).on("touchend", function(e) {
        $(this).parent().find(".basket_popup_wrapp").length && !$(this).hasClass("hover") && (e.preventDefault(), e.stopPropagation(), $(this).addClass("hover"), $(this).parent().find(".basket_popup_wrapp").slideDown())
    }) : $(e).off())
}

function initFull() {
    initSelects(document), initHoverBlock(document), InitOrderCustom(), $("html.print").length ? window.print() : checkStickyFooter(), basketActions(), orderActions()
}
var basketTimeoutSlide, resizeEventTimer, funcDefined = function(e) {
    try {
        return "function" == typeof e ? !0 : "function" == typeof window[e]
    } catch (t) {
        return !1
    }
};
if (!funcDefined("setLocationSKU"), !funcDefined("trimPrice")) var trimPrice = function(e) {
    return e = e.split(" ").join(""), e = e.split("&nbsp;").join("")
};
if (!funcDefined("markProductRemoveBasket")) var markProductRemoveBasket = function(e) {
    $(".in-cart[data-item=" + e + "]").hide(), $(".to-cart[data-item=" + e + "]").show(), $(".to-cart[data-item=" + e + "]").closest(".button_block").removeClass("wide"), $(".to-cart[data-item=" + e + "]").closest(".counter_wrapp").find(".counter_block").show(), $(".counter_block[data-item=" + e + "]").show(), $(".in-subscribe[data-item=" + e + "]").hide(), $(".to-subscribe[data-item=" + e + "]").show(), $(".wish_item[data-item=" + e + "]").removeClass("added"), $(".wish_item[data-item=" + e + "] .value:not(.added)").show(), $(".wish_item[data-item=" + e + "] .value.added").hide()
};
if (!funcDefined("markProductAddBasket")) var markProductAddBasket = function(e) {
    $(".to-cart[data-item=" + e + "]").hide(), $(".to-cart[data-item=" + e + "]").closest(".counter_wrapp").find(".counter_block").hide(), $(".to-cart[data-item=" + e + "]").closest(".button_block").addClass("wide"), $(".in-cart[data-item=" + e + "]").show(), $(".wish_item[data-item=" + e + "]").removeClass("added"), $(".wish_item[data-item=" + e + "] .value:not(.added)").show(), $(".wish_item[data-item=" + e + "] .value.added").hide()
};
if (!funcDefined("markProductDelay")) var markProductDelay = function(e) {
    $(".in-cart[data-item=" + e + "]").hide(), $(".to-cart[data-item=" + e + "]").show(), $(".to-cart[data-item=" + e + "]").closest(".counter_wrapp").find(".counter_block").show(), $(".to-cart[data-item=" + e + "]").closest(".button_block").removeClass("wide"), $(".wish_item[data-item=" + e + "]").addClass("added"), $(".wish_item[data-item=" + e + "] .value:not(.added)").hide(), $(".wish_item[data-item=" + e + "] .value.added").css("display", "block")
};
if (!funcDefined("markProductSubscribe")) var markProductSubscribe = function(e) {
    $(".to-subscribe[data-item=" + e + "]").hide(), $(".in-subscribe[data-item=" + e + "]").css("display", "block")
};
if (!funcDefined("basketFly")) var basketFly = function(e) {
    $.post(arOptimusOptions.SITE_DIR + "ajax/basket_fly.php", "PARAMS=" + $("#basket_form").find("input#fly_basket_params").val(), $.proxy(function(t) {
        var a = $(".opener .basket_count").hasClass("small");
        $(t).find(".basket_count").find(".items div").text();
        $("#basket_line .basket_fly").addClass("loaded").html(t), "refresh" == e && $("li[data-type=AnDelCanBuy]").trigger("click"), window.matchMedia("(min-width: 769px)").matches && ("open" == e ? a ? "N" !== arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART && $(".opener .basket_count").click() : ($(".opener .basket_count").removeClass("small"), $('.tabs_content.basket li[item-section="AnDelCanBuy"]').addClass("cur"), $('#basket_line ul.tabs li[item-section="AnDelCanBuy"]').addClass("cur")) : "wish" == e ? a ? "N" !== arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART && $(".opener .wish_count").click() : ($(".opener .wish_count").removeClass("small"), $('.tabs_content.basket li[item-section="DelDelCanBuy"]').addClass("cur"), $('#basket_line ul.tabs li[item-section="DelDelCanBuy"]').addClass("cur")) : "N" !== arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART && $(".opener .basket_count").click())
    }))
};
if (!funcDefined("clearViewedProduct"), !funcDefined("setViewedProduct"), !funcDefined("initSelects"), funcDefined("CheckTopMenuFullCatalogSubmenu") || (CheckTopMenuFullCatalogSubmenu = function() {
        var e = $(".menu_top_block"),
            t = e.parents(".wrap_menu"),
            a = t.actual("outerWidth"),
            i = t.offset().left,
            o = i + a,
            n = e.hasClass("catalogfirst"),
            s = $(".menu_top_block:visible li.full"),
            r = e.actual("outerWidth");
        $(".catalog_block.menu_top_block").length && $(".catalog_block.menu_top_block").is(":visible") && (s = $(".menu_top_block.catalog_block li.full")), s.each(function() {
            var e = $(this),
                t = e.find(">.dropdown");
            t.length && (n ? t.css({
                left: r + "px",
                width: a - r + "px",
                "padding-left": "0px",
                "padding-right": "0px"
            }) : t.css({
                left: -1 * e.offset().left + "px",
                width: $(window).width() - 1 + "px",
                "padding-left": i + "px",
                "padding-right": $(window).width() - o + "px"
            }), !isOnceInited && n && "top" == arOptimusOptions.THEME.MENU_POSITION && e.on("mouseenter", function() {
                t.css("min-height", e.closest(".dropdown").actual("outerHeight") + "px")
            }))
        })
    }), $.fn.getMaxHeights = function(e, t, a) {
        for (var i = this.map(function(t, a) {
                var i = 0;
                return $(a).css("height", ""), i = 1 == e ? $(a).actual("outerHeight") : $(a).actual("height")
            }).get(), o = 0, n = i.length; n > o; ++o) i[o] % 2 && --i[o];
        return Math.max.apply(this, i)
    }, $.fn.equalizeHeights = function(e, t, a) {
        for (var i = this.map(function(i, o) {
                var n = 0,
                    s = 0;
                return t !== !1 && (n = parseInt($(o).find(t).actual("outerHeight"))), n && (n += 12), $(o).css("height", ""), s = 1 == e ? $(o).actual("outerHeight") - n : $(o).actual("height") - n, a !== !1 && (a > s && (s += a - s), window.matchMedia("(max-width: 520px)").matches && (s = 300), window.matchMedia("(max-width: 400px)").matches && (s = 200)), s
            }).get(), o = 0, n = i.length; n > o; ++o) i[o] % 2 && --i[o];
        return this.height(Math.max.apply(this, i))
    }, $.fn.getFloatWidth = function() {
        var e = 0;
        if ($(this).length) {
            var t = $(this)[0].getBoundingClientRect();
            (e = t.width) || (e = t.right - t.left)
        }
        return e
    }, $.fn.sliceHeight = function(e) {
        function t(t) {
            if (t.each(function() {
                    $(this).css("line-height", ""), $(this).css("height", "")
                }), "undefined" == typeof e.autoslicecount || e.autoslicecount !== !1) {
                var a = "undefined" != typeof e.row && e.row.length ? t.first().parents(e.row).getFloatWidth() : t.first().parents(".items").getFloatWidth(),
                    i = "undefined" != typeof e.item && e.item.length ? $(e.item).first().getFloatWidth() : t.first().hasClass("item") ? t.first().getFloatWidth() : t.first().parents(".item").getFloatWidth();
                a || (a = t.first().parents(".row").getFloatWidth()), a && i && (e.slice = Math.floor(a / i))
            }
            if (e.slice)
                for (var o = 0; o < t.length; o += e.slice) $(t.slice(o, o + e.slice)).equalizeHeights(e.outer, e.classNull, e.minHeight);
            if (e.lineheight) {
                var n = parseInt(e.lineheight);
                isNaN(n) && (n = 0), t.each(function() {
                    $(this).css("line-height", $(this).actual("height") + n + "px")
                })
            }
        }
        var e = $.extend({
                slice: null,
                outer: !1,
                lineheight: !1,
                autoslicecount: !0,
                classNull: !1,
                minHeight: !1,
                options: !1,
                resize: !0,
                row: !1,
                item: !1
            }, e),
            a = $(this);
        t(a), e.resize && BX.addCustomEvent("onWindowResize", function(e) {
            ignoreResize.push(!0), t(a), ignoreResize.pop()
        })
    }, $.fn.sliceHeightNoResize = function(e) {
        function t(t) {
            if (t.each(function() {
                    $(this).css("line-height", ""), $(this).css("height", "")
                }), "undefined" == typeof e.autoslicecount || e.autoslicecount !== !1) {
                var a = t.first().hasClass("item") ? t.first().getFloatWidth() : t.first().parents(".item").getFloatWidth(),
                    i = t.first().parents(".items").getFloatWidth();
                i || (i = t.first().parents(".row").getFloatWidth()), i && a && (e.slice = Math.floor(i / a))
            }
            if (e.slice)
                for (var o = 0; o < t.length; o += e.slice) $(t.slice(o, o + e.slice)).equalizeHeights(e.outer, e.classNull, e.minHeight);
            if (e.lineheight) {
                var n = parseInt(e.lineheight);
                isNaN(n) && (n = 0), t.each(function() {
                    $(this).css("line-height", $(this).actual("height") + n + "px")
                })
            }
        }
        var e = $.extend({
                slice: null,
                outer: !1,
                lineheight: !1,
                autoslicecount: !0,
                classNull: !1,
                minHeight: !1,
                options: !1,
                resize: !0
            }, e),
            a = $(this);
        t(a)
    }, !funcDefined("initHoverBlock"), !funcDefined("setStatusButton"), !funcDefined("onLoadjqm")) var onLoadjqm = function(e, t, a, i, o, n, s) {
    t.w.addClass("show").css({
        "margin-left": $(window).width() > t.w.outerWidth() ? "-" + t.w.outerWidth() / 2 + "px" : "-" + $(window).width() / 2 + "px",
        top: $(document).scrollTop() + ($(window).height() > t.w.outerHeight() ? ($(window).height() - t.w.outerHeight()) / 2 : 10) + "px",
        opacity: 1
    }), "undefined" == typeof a && (a = ""), "undefined" == typeof i && (i = !1);
    var r = $("." + e + "_frame").width();
    $("." + e + "_frame").css("margin-left", "-" + r / 2 + "px"), "order-popup-call" == e || ("order-button" == e ? $(".order-button_frame").find("div[product_name]").find("input").val(t.t.title).attr("readonly", "readonly").css({
        overflow: "hidden",
        "text-overflow": "ellipsis"
    }) : "to-order" == e && i ? ($(".to-order_frame").find('[data-sid="PRODUCT_NAME"]').val($(i).data("name")).attr("readonly", "readonly").css({
        overflow: "hidden",
        "text-overflow": "ellipsis"
    }), $(".to-order_frame").find('[data-sid="PRODUCT_ID"]').val($(i).attr("data-item"))) : "services" == e && i ? $(".services_frame").find('[data-sid="SERVICE"]').val($(i).attr("data-title")) : "resume" == e && i ? $(i).attr("data-jobs") && $(".resume_frame").find('[data-sid="POST"]').attr("readonly", "readonly").val($(i).attr("data-jobs")) : "basket_error" == e ? ($(".basket_error_frame .pop-up-title").text(o), $(".basket_error_frame .ajax_text").html(a), initSelects(document), "Y" == n && s && $("<div class='popup_button_basket_wr'><span class='popup_button_basket big_btn button' data-item=" + s.data("item") + "><span>" + BX.message("ERROR_BASKET_BUTTON") + "</span></span></div>").insertAfter($(".basket_error_frame .ajax_text"))) : "one_click_buy" == e ? ($("#one_click_buy_form_button").on("click", function() {
        $(this).hasClass("clicked") || $("#one_click_buy_form").valid() && $(this).addClass("clicked")
    }), $("#one_click_buy_form").submit(function() {
        if ($("#one_click_buy_form").valid()) {
            if ($("." + e + "_frame form input.error").length || $("." + e + "_frame form textarea.error").length) return !1;
            $.ajax({
                url: $(this).attr("action"),
                data: $(this).serialize(),
                type: "POST",
                dataType: "json",
                error: function(e) {
                    alert("Error connecting server")
                },
                success: function(e) {
                    if ("Y" == e.result) {
                        if ("N" !== arOptimusOptions.COUNTERS.USE_1CLICK_GOALS) {
                            var t = {
                                goal: "goal_1click_success"
                            };
                            BX.onCustomEvent("onCounterGoals", [t])
                        }
                        $(".one_click_buy_result").show(), $(".one_click_buy_result_success").show(), purchaseCounter(e.message, arOptimusOptions.COUNTERS.TYPE.ONE_CLICK)
                    } else $(".one_click_buy_result").show(), $(".one_click_buy_result_fail").show(), "err" in e && e.err && (e.message = e.message + " \n" + e.err), $(".one_click_buy_result_text").html(e.message);
                    $(".one_click_buy_modules_button", self).removeClass("disabled"), $("#one_click_buy_form").hide(), $("#one_click_buy_form_result").show()
                }
            })
        }
        return !1
    })) : "one_click_buy_basket" == e && ($("#one_click_buy_form_button").on("click", function() {
        $(this).hasClass("clicked") || $("#one_click_buy_form").valid() && $(this).addClass("clicked")
    }), $("#one_click_buy_form").on("submit", function() {
        if ($("#one_click_buy_form").valid()) {
            if ($("." + e + "_frame form input.error").length || $("." + e + "_frame form textarea.error").length) return !1;
            $.ajax({
                url: $(this).attr("action"),
                data: $(this).serialize(),
                type: "POST",
                dataType: "json",
                error: function(e) {
                    window.console && console.log(e)
                },
                success: function(e) {
                    if ("Y" == e.result) {
                        if ("N" !== arOptimusOptions.COUNTERS.USE_FASTORDER_GOALS) {
                            var t = {
                                goal: "goal_fastorder_success"
                            };
                            BX.onCustomEvent("onCounterGoals", [t])
                        }
                        $(".one_click_buy_result").show(), $(".one_click_buy_result_success").show(), purchaseCounter(e.message, arOptimusOptions.COUNTERS.TYPE.QUICK_ORDER)
                    } else $(".one_click_buy_result").show(), $(".one_click_buy_result_fail").show(), "err" in e && e.err && (e.message = e.message + " \n" + e.err), $(".one_click_buy_result_text").text(e.message);
                    $(".one_click_buy_modules_button", self).removeClass("disabled"), $("#one_click_buy_form").hide(), $("#one_click_buy_form_result").show()
                }
            })
        }
        return !1
    }))), $("." + e + "_frame").show()
};
if (!funcDefined("onHidejqm")) var onHidejqm = function(e, t) {
    t.w.find(".one_click_buy_result_success").is(":visible") && "one_click_buy_basket" == e && (window.location.href = window.location.href), t.w.css("opacity", 0).hide(), t.w.empty(), t.o.remove(), t.w.removeClass("show")
};
if (!funcDefined("oneClickBuy")) var oneClickBuy = function(e, t, a) {
    var i = "one_click_buy",
        o = 1,
        n = !1,
        s = $(a).closest(".buy_block").find(".to-cart"),
        r = $(a).closest("tr").find(".to-cart");
    "undefined" != typeof a && (o = $(a).attr("data-quantity"), n = $(a).attr("data-props")), 0 > o && (o = 1);
    var c = s.data("props"),
        d = r.data("props"),
        l = "",
        u = "",
        p = "N",
        f = {},
        m = s.data("iblockid"),
        h = s.attr("data-item");
    c ? l = c.split(";") : d && (l = d.split(";")), s.data("part_props") && (u = s.data("part_props")), s.data("add_props") && (p = s.data("add_props")), f = fillBasketPropsExt(s, "prop", s.data("bakset_div")), f.iblockID = m, f.part_props = u, f.add_props = p, f.props = JSON.stringify(l), f.item = h, f.ocb_item = "Y", $("body").find("." + i + "_frame").remove(), $("body").find("." + i + "_trigger").remove(), $("body").append('<div class="' + i + '_frame popup"></div>'), $("body").append('<div class="' + i + '_trigger"></div>'), $("." + i + "_frame").jqm({
        trigger: "." + i + "_trigger",
        onHide: function(e) {
            onHidejqm(i, e)
        },
        toTop: !1,
        onLoad: function(e) {
            onLoadjqm(i, e)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/one_click_buy.php?ELEMENT_ID=" + e + "&IBLOCK_ID=" + t + "&ELEMENT_QUANTITY=" + o + "&OFFER_PROPS=" + f.props
    }), $("." + i + "_trigger").click()
};
if (!funcDefined("oneClickBuyBasket")) var oneClickBuyBasket = function() {
    name = "one_click_buy_basket", $("body").find("." + name + "_frame").remove(), $("body").find("." + name + "_trigger").remove(), $("body").append('<div class="' + name + '_frame popup"></div>'), $("body").append('<div class="' + name + '_trigger"></div>'), $("." + name + "_frame").jqm({
        trigger: "." + name + "_trigger",
        onHide: function(e) {
            onHidejqm(name, e)
        },
        onLoad: function(e) {
            onLoadjqm(name, e)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/one_click_buy_basket.php"
    }), $("." + name + "_trigger").click()
};
if (!funcDefined("scroll_block"), !funcDefined("jqmEd")) var jqmEd = function(e, t, a, i, o, n, s, r) {
    return "undefined" == typeof i && (i = ""), "undefined" == typeof o && (o = !1), $("body").find("." + e + "_frame").remove(), $("body").append('<div class="' + e + '_frame popup"></div>'), "undefined" == typeof a ? $("." + e + "_frame").jqm({
        trigger: "." + e + "_frame.popup",
        onHide: function(t) {
            onHidejqm(e, t)
        },
        onLoad: function(t) {
            onLoadjqm(e, t, i, o)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/form.php?form_id=" + t + (i.length ? "&" + i : "")
    }) : ("enter" == e ? $("." + e + "_frame").jqm({
        trigger: a,
        onHide: function(t) {
            onHidejqm(e, t)
        },
        onLoad: function(t) {
            onLoadjqm(e, t, i, o)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/auth.php"
    }) : "basket_error" == e ? $("." + e + "_frame").jqm({
        trigger: a,
        onHide: function(t) {
            onHidejqm(e, t)
        },
        onLoad: function(t) {
            onLoadjqm(e, t, i, o, n, s, r)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/basket_error.php"
    }) : $("." + e + "_frame").jqm({
        trigger: a,
        onHide: function(t) {
            onHidejqm(e, t)
        },
        onLoad: function(t) {
            onLoadjqm(e, t, i, o)
        },
        ajax: arOptimusOptions.SITE_DIR + "ajax/form.php?form_id=" + t + (i.length ? "&" + i : "")
    }), $(a).dblclick(function() {
        return !1
    })), !0
};
if (!funcDefined("replaceBasketPopup"), !funcDefined("waitLayer"), funcDefined("waitCounter") || (waitCounter = function(e, t, a) {
        var i = window["yaCounter" + e];
        "object" == typeof i ? "function" == typeof a && a() : setTimeout(function() {
            waitCounter(e, t, a)
        }, t)
    }), funcDefined("InitTopestMenuGummi") || (InitTopestMenuGummi = function() {
        function e() {
            var e = a.find(">li:not(.more)"),
                t = e.length;
            if (t)
                for (var i = 0, o = 0; t > o; ++o) {
                    var r = e.eq(o),
                        c = r.actual("outerWidth", {
                            includeMargin: !0
                        });
                    s[o] = (i += c) + (o !== t - 1 ? n : 0)
                }
        }

        function t() {
            var e = a.actual("innerWidth"),
                t = a.find(">li:not(.more),li.more>.dropdown>li"),
                n = t.length;
            if (n) {
                for (var r = !1, c = n - 1; c >= 0; --c) {
                    var d = t.eq(c),
                        l = d.parents(".more").length > 0;
                    if (!l && s[c] > e) {
                        r || (r = !0, i.removeClass("hidden"));
                        var u = d.clone();
                        u.find(">a").addClass("dark_font"), u.prependTo(o), d.addClass("cloned")
                    }
                }
                for (var c = 0; n > c; ++c) {
                    var d = t.eq(c),
                        l = d.parents(".more").length > 0;
                    if (l && s[c] <= e) {
                        c === n - 1 && (r = !1, i.addClass("hidden"));
                        var u = d.clone();
                        u.find(">a").removeClass("dark_font"), u.insertBefore(i), d.addClass("cloned")
                    }
                }
                a.find("li.cloned").remove()
            }
        }
        if (!isOnceInited) {
            var a = $(".menu.topest"),
                i = a.find(">.more"),
                o = i.find(">.dropdown"),
                n = i.actual("outerWidth", {
                    includeMargin: !0
                }),
                s = [];
            ignoreResize.push(!0), e(), t(), ignoreResize.pop(), $(window).resize(function() {
                ignoreResize.push(!0), t(), ignoreResize.pop()
            })
        }
    }), funcDefined("InitTopMenuGummi") || (InitTopMenuGummi = function() {
        function e() {
            var e = a.closest(".wrap_menu").find(".inc_menu .menu_top_block >li:not(.more)"),
                t = e.length;
            if (t)
                for (var i = 0, o = 0; t > o; ++o) {
                    var n = e.eq(o),
                        c = n.actual("outerWidth");
                    r[o] = (i += c) + (o !== t - 1 ? s : 0)
                }
        }

        function t() {
            var e = i.actual("innerWidth") - o.actual("innerWidth"),
                t = a.find(">li:not(.more):not(.catalog),li.more>.dropdown>li"),
                s = t.length;
            if (s) {
                for (var d = !1, u = s - 1; u >= 0; --u) {
                    var p = t.eq(u),
                        f = p.parents(".more").length > 0;
                    if (!f && r[u] > e) {
                        d || (d = !0, n.removeClass("hidden"));
                        var m = p.clone();
                        m.find(">.dropdown").removeAttr("style").removeClass("toleft"), m.find(">a").addClass("dark_font").removeAttr("style"), m.prependTo(c), p.addClass("cloned")
                    }
                }
                for (var u = 0; s > u; ++u) {
                    var p = t.eq(u),
                        f = p.parents(".more").length > 0;
                    if (f && r[u] <= e) {
                        u === s - 1 && (d = !1, n.addClass("hidden"));
                        var m = p.clone();
                        m.find(">a").removeClass("dark_font"), m.insertBefore(n), p.addClass("cloned")
                    }
                }
                a.find("li.cloned").remove();
                var h = a.find(">li:not(.more):not(.catalog)").length,
                    _ = e - r[h - 1],
                    b = Math.floor(_ / (h + (n.hasClass("hidden") ? 0 : 1))),
                    v = l + b,
                    k = Math.floor(v / 2),
                    g = v - k;
                a.find(">li:not(.catalog):visible>a").each(function() {
                    $(this).css({
                        "padding-left": k + "px"
                    }), $(this).css({
                        "padding-right": g + "px"
                    })
                });
                var w = v + _ - (h + (n.is(":visible") ? 1 : 0)) * b,
                    C = Math.floor(w / 2),
                    O = w - C;
                a.find(">li:visible").last().find(">a").css({
                    "padding-left": C + "px"
                }), a.find(">li:visible").last().find(">a").css({
                    "padding-right": O + "px"
                }), CheckTopMenuFullCatalogSubmenu()
            }
        }
        var a = $(".menu_top_block"),
            i = a.parents(".wrap_menu"),
            o = i.find(".catalog_menu_ext"),
            n = a.find(">.more"),
            s = n.actual("outerWidth", {
                includeMargin: !0
            });
        n.addClass("hidden");
        var r = [],
            c = n.find(">.dropdown"),
            d = 2 * parseInt(n.find(">a").css("padding-left")),
            l = d;
        ignoreResize.push(!0), e(), t(), ignoreResize.pop(), $(window).resize(function() {
            ignoreResize.push(!0), t(), ignoreResize.pop()
        })
    }), !funcDefined("checkCounters"), !funcDefined("addBasketCounter"), !funcDefined("purchaseCounter"), !funcDefined("viewItemCounter"), !funcDefined("checkoutCounter"), !funcDefined("delFromBasketCounter"), !funcDefined("setHeightCompany"), !funcDefined("initSly"), !funcDefined("createTableCompare"), funcDefined("fillBasketPropsExt") || (fillBasketPropsExt = function(e, t, a) {
        var i = 0,
            o = null,
            n = !1,
            s = {},
            r = null;
        if (r = BX(a)) {
            if (o = r.getElementsByTagName("select"), o && o.length)
                for (i = 0; i < o.length; i++)
                    if (!o[i].disabled) switch (o[i].type.toLowerCase()) {
                        case "select-one":
                            s[o[i].name] = o[i].value, n = !0
                    }
            if (o = r.getElementsByTagName("input"), o && o.length)
                for (i = 0; i < o.length; i++)
                    if (!o[i].disabled) switch (o[i].type.toLowerCase()) {
                        case "hidden":
                            s[o[i].name] = o[i].value, n = !0;
                            break;
                        case "radio":
                            o[i].checked && (s[o[i].name] = o[i].value, n = !0)
                    }
        }
        return n || (s[t] = [], s[t][0] = 0), s
    }), funcDefined("showBasketError") || (showBasketError = function(e, t, a, i) {
        var o = t ? t : BX.message("ERROR_BASKET_TITLE"),
            n = "N",
            s = "";
        void 0 !== typeof a && (n = "Y"), void 0 !== typeof i && (s = i), $("body").append("<span class='add-error-bakset' style='display:none;'></span>"), jqmEd("basket_error", "error-bakset", ".add-error-bakset", e, this, o, n, s), $("body .add-error-bakset").click(), $("body .add-error-bakset").remove()
    }), !funcDefined("isRealValue"), !funcDefined("rightScroll"), !funcDefined("leftScroll"), funcDefined("InitOrderCustom") || (InitOrderCustom = function() {
        $(".ps_logo img").wrap('<div class="image"></div>'), $("#bx-soa-order .radio-inline").each(function() {
            "checked" == $(this).find("input").attr("checked") && $(this).addClass("checked")
        }), $("#bx-soa-order .checkbox input[type=checkbox]").each(function() {
            "checked" == $(this).attr("checked") && $(this).parent().addClass("checked")
        }), $("#bx-soa-order .bx-authform-starrequired").each(function() {
            var e = $(this).html();
            $(this).closest("label").append('<span class="bx-authform-starrequired"> ' + e + "</span>"), $(this).detach()
        }), $(".bx_ordercart_coupon").each(function() {
            $(this).find(".bad").length ? $(this).addClass("bad") : $(this).find(".good").length && $(this).addClass("good")
        })
    }), funcDefined("InitLabelAnimation") || (InitLabelAnimation = function(e) {
        $(e).length && ($(e).find(".form-group").each(function() {
            $(this).find("input[type=text], textarea").length && !$(this).find(".dropdown-block").length && "" != $(this).find("input[type=text], textarea").val() && $(this).addClass("value_y")
        }), $(document).on("click", e + " .form-group:not(.bx-soa-pp-field) label", function() {
            $(this).parent().find("input, textarea").focus()
        }), $(document).on("focusout", e + " .form-group:not(.bx-soa-pp-field) input, " + e + " .form-group:not(.bx-soa-pp-field) textarea", function() {
            var e = $(this).val();
            "" == e || $(this).closest(".form-group").find(".dropdown-block").length || $(this).closest(".form-group").find("#profile_change").length ? $(this).closest(".form-group").removeClass("value_y") : $(this).closest(".form-group").addClass("value_y")
        }), $(document).on("focus", e + " .form-group:not(.bx-soa-pp-field) input, " + e + " .form-group:not(.bx-soa-pp-field) textarea", function() {
            $(this).closest(".form-group").find(".dropdown-block").length || $(this).closest(".form-group").find("#profile_change").length || $(this).closest(".form-group").find("[name=PERSON_TYPE_OLD]").length || $(this).closest(".form-group").addClass("value_y")
        }))
    }), checkPopupWidth = function() {
        $(".popup.show").each(function() {
            var e = $(this).actual("width");
            $(this).css({
                "margin-left": $(window).width() > e ? "-" + e / 2 + "px" : "-" + $(window).width() / 2 + "px"
            })
        })
    }, checkCaptchaWidth = function() {
        $(".captcha-row").each(function() {
            var e = $(this).actual("width");
            $(this).hasClass("b") ? e > 320 && $(this).removeClass("b") : 320 >= e && $(this).addClass("b")
        })
    }, checkFormWidth = function() {
        $(".form .form_left").each(function() {
            var e = $(this).parents(".form"),
                t = e.actual("width");
            e.hasClass("b") ? t > 417 && e.removeClass("b") : 417 >= t && e.addClass("b")
        })
    }, checkFormControlWidth = function() {
        $(".form-control").each(function() {
            var e = $(this).actual("width"),
                t = $(this).find("label:not(.error) > span").actual("width"),
                a = $(this).find("label.error").actual("width");
            a > 0 ? $(this).hasClass("h") ? e > t + a + 5 && $(this).removeClass("h") : t + a + 5 >= e && $(this).addClass("h") : $(this).removeClass("h")
        })
    }, scrollToTop = function() {
        if ("NONE" !== arOptimusOptions.THEME.SCROLLTOTOP_TYPE) {
            var e = !1;
            $("body").append($("<a />").addClass("scroll-to-top " + arOptimusOptions.THEME.SCROLLTOTOP_TYPE + " " + arOptimusOptions.THEME.SCROLLTOTOP_POSITION).attr({
                href: "#",
                id: "scrollToTop"
            })), $("#scrollToTop").click(function(e) {
                return e.preventDefault(), $("body, html").animate({
                    scrollTop: 0
                }, 500), !1
            }), $(window).scroll(function() {
                e || (e = !0, $(window).scrollTop() > 150 ? ($("#scrollToTop").stop(!0, !0).addClass("visible"),
                    e = !1) : ($("#scrollToTop").stop(!0, !0).removeClass("visible"), e = !1), checkScrollToTop())
            })
        }
    }, checkScrollToTop = function() {
        var e = 55,
            t = $(window).scrollTop(),
            a = $(window).height(),
            i = 70;
        $("footer").length && (i = $("footer").offset().top + 70), "CONTENT" == arOptimusOptions.THEME.SCROLLTOTOP_POSITION && (warpperWidth = $("body > .wrapper > .wrapper_inner").width(), $("#scrollToTop").css("margin-left", Math.ceil(warpperWidth / 2) + 23)), t + a > i ? $("#scrollToTop").css("bottom", e + t + a - i - 0) : parseInt($("#scrollToTop").css("bottom")) > e && $("#scrollToTop").css("bottom", e)
    }, CheckObjectsSizes = function() {
        $(".container iframe,.container object,.container video").each(function() {
            var e = $(this).attr("height"),
                t = $(this).attr("width");
            e && t && $(this).css("height", $(this).outerWidth() * e / t)
        })
    }, !funcDefined("reloadTopBasket")) var reloadTopBasket = function(e, t, a, i, o, n) {
    var s = {
        PARAMS: $("#top_basket_params").val(),
        ACTION: e
    };
    "undefined" != typeof n && (s.delete_top_item = "Y", s.delete_top_item_id = n.data("id")), $.post(arOptimusOptions.SITE_DIR + "ajax/show_basket_popup.php", s, $.proxy(function(e) {
        $(t).html(e), getActualBasket(), "N" !== arOptimusOptions.THEME.SHOW_BASKET_ONADDTOCART && $(window).outerWidth() > 520 && ("Y" == o && $(t).find(".basket_popup_wrapp").stop(!0, !0).slideDown(a), clearTimeout(basketTimeoutSlide), basketTimeoutSlide = setTimeout(function() {
            var e = $("#basket_line").find(".basket_popup_wrapp");
            e.is(":hover") ? e.show() : $("#basket_line").find(".basket_popup_wrapp").slideUp(a)
        }, i))
    }))
};
if (!funcDefined("initCountdown")) var initCountdown = function() {
    $(".view_sale_block").size() && $(".view_sale_block").each(function() {
        var e = $(this).find(".active_to").text(),
            t = new Date(e.replace(/(\d+)\.(\d+)\.(\d+)/, "$3/$2/$1"));
        $(this).find(".countdown").countdown({
            until: t,
            format: "dHMS",
            padZeroes: !0,
            layout: '{d<}<span class="days item">{dnn}<div class="text">{dl}</div></span>{d>} <span class="hours item">{hnn}<div class="text">{hl}</div></span> <span class="minutes item">{mnn}<div class="text">{ml}</div></span> <span class="sec item">{snn}<div class="text">{sl}</div></span>'
        }, $.countdown.regionalOptions.ru)
    })
};
var isOnceInited = insertFilter = !1,
    animationTime = 200,
    delayTime = 200,
    topMenuEnterTimer = !1,
    isMobile = jQuery.browser.mobile;
if (isMobile && (document.documentElement.className += " mobile"), !funcDefined("checkVerticalMobileFilter")) var checkVerticalMobileFilter = function() {
    if ($(".right_block1.catalog.vertical").length) {
        if ("undefined" != typeof window.trackBarOptions) {
            window.trackBarValues = {};
            for (key in window.trackBarOptions) window.trackBarValues[key] = {
                leftPercent: window["trackBar" + key].leftPercent,
                leftValue: window["trackBar" + key].minInput.value,
                rightPercent: window["trackBar" + key].rightPercent,
                rightValue: window["trackBar" + key].maxInput.value
            }
        }
        if (window.matchMedia("(max-width: 950px)").matches ? insertFilter || ($(".js_filter .bx_filter.bx_filter_vertical").html($(".left_block .bx_filter.bx_filter_vertical").html()), $(".left_block .bx_filter.bx_filter_vertical .bx_filter_section").remove(), insertFilter = !0) : insertFilter && ($(".left_block .bx_filter.bx_filter_vertical").html($(".js_filter .bx_filter.bx_filter_vertical").html()), $(".js_filter .bx_filter.bx_filter_vertical .bx_filter_section").remove(), insertFilter = !1), "undefined" != typeof window.trackBarOptions)
            for (key in window.trackBarOptions) window.trackBarOptions[key].leftPercent = window.trackBarValues[key].leftPercent, window.trackBarOptions[key].rightPercent = window.trackBarValues[key].rightPercent, window.trackBarOptions[key].curMinPrice = window.trackBarValues[key].leftValue, window.trackBarOptions[key].curMaxPrice = window.trackBarValues[key].rightValue, window["trackBar" + key] = new BX.Iblock.SmartFilter(window.trackBarOptions[key]), window["trackBar" + key].minInput.value = window.trackBarValues[key].leftValue, window["trackBar" + key].maxInput.value = window.trackBarValues[key].rightValue
    }
};
$(document).on("click", ".menu_top_block>li .more a", function() {
    $this = $(this), $this.parents(".dropdown").first().find(">.hidden").removeClass("hidden"), $this.parent().addClass("hidden"), setTimeout(function() {
        $this.parent().remove()
    }, 500)
}), $(document).on("mouseenter", ".menu_top_block.catalogfirst>li>.dropdown>li.full", function() {
    var e = $(this).find(">.dropdown");
    e.length && topMenuEnterTimer && (clearTimeout(topMenuEnterTimer), topMenuEnterTimer = !1)
}), $(document).on("mouseenter", ".menu_top_block>li:not(.full)", function() {
    var e = $(this).find(">.dropdown");
    if (e.length && !e.hasClass("visible")) {
        var t = $(this).parents(".menu"),
            a = t.parents(".wrap_menu"),
            i = a.actual("outerWidth"),
            o = a.offset().left,
            n = o + i,
            s = n - ($(this).offset().left + e.actual("outerWidth"));
        if (window.matchMedia("(min-width: 951px)").matches && $(this).hasClass("catalog") && ($(".banner_auto").hasClass("catalog_page") || $(".banner_auto").hasClass("front_page"))) return;
        0 > s && e.css({
            left: s + "px"
        }), e.stop().slideDown(animationTime, function() {
            e.css({
                height: "",
                overflow: "visible"
            })
        }), $(this).on("mouseleave", function() {
            var t = setTimeout(function() {
                e.stop().slideUp(animationTime, function() {
                    e.css({
                        left: ""
                    })
                })
            }, delayTime);
            $(this).on("mouseenter", function() {
                t && (clearTimeout(t), t = !1)
            })
        })
    }
}), $(document).on("mouseenter", ".menu_top_block>li .dropdown>li", function() {
    var e = $(this),
        t = e.find(">.dropdown");
    if (t.length && (!e.parents(".full").length && !e.hasClass("full") || e.parents(".more").length)) {
        var a = e.parents(".menu"),
            o = a.parents(".wrap_menu"),
            n = [];
        topMenuEnterTimer = setTimeout(function() {
            var a = o.actual("outerWidth"),
                i = o.offset().left,
                s = i + a,
                r = e.parent(),
                c = r.hasClass("toleft") ? !0 : !1;
            c = c ? e.offset().left + e.actual("outerWidth") - t.actual("outerWidth") < i : e.offset().left + e.actual("outerWidth") + t.actual("outerWidth") > s, c ? e.find(">.dropdown").addClass("toleft").show() : e.find(">.dropdown").removeClass("toleft").show();
            var d = t.offset().left,
                l = d + t.actual("outerWidth");
            e.parents(".dropdown").each(function() {
                var e = $(this),
                    t = e.offset().left,
                    a = t + e.actual("outerWidth");
                (t >= d && l - 1 > t || a > d + 1 && l >= a) && (n.push(e), e.find(">li>a").css({
                    opacity: "0.1"
                }))
            })
        }, delayTime), e.unbind("mouseleave"), e.on("mouseleave", function() {
            var t = setTimeout(function() {
                if (e.find(".dropdown").removeClass("toleft").hide(), n.length)
                    for (i in n) n[i].find(">li>a").css({
                        opacity: ""
                    })
            }, delayTime);
            e.unbind("mouseenter"), e.on("mouseenter", function() {
                t && (clearTimeout(t), t = !1)
            })
        })
    }
}), getGridSize = function(e) {
    var t = 1;
    return window.matchMedia("(min-width: 1200px)").matches && (t = e[0]), window.matchMedia("(max-width: 1200px)").matches && (t = e[1]), window.matchMedia("(max-width: 992px)").matches && (t = e[2]), e[3] && window.matchMedia("(max-width: 600px)").matches && (t = e[3]), e[4] && window.matchMedia("(max-width: 400px)").matches && (t = e[4]), t
}, CheckFlexSlider = function() {
    $(".flexslider:not(.thmb)").each(function() {
        var e = $(this);
        e.resize();
        var t = e.data("flexslider").vars.counts;
        if ("undefined" != typeof t) {
            var a = getGridSize(t),
                i = a != e.data("flexslider").vars.minItems || a != e.data("flexslider").vars.maxItems || a != e.data("flexslider").vars.move;
            i && (e.data("flexslider").vars.minItems = a, e.data("flexslider").vars.maxItems = a, e.data("flexslider").vars.move = a, e.flexslider(0), e.resize(), e.resize())
        }
    })
}, InitFlexSlider = function() {
    $(".flexslider:not(.thmb):not(.flexslider-init)").each(function() {
        var e, t = $(this),
            a = {
                animationLoop: !1,
                controlNav: !1,
                directionNav: !0,
                animation: "slide"
            },
            i = $.extend({}, a, e, t.data("plugin-options"));
        t.parent().hasClass("top_slider_wrapp") || ("undefined" != typeof i.counts && "vertical" !== i.direction && (i.maxItems = getGridSize(i.counts), i.minItems = getGridSize(i.counts), i.move = getGridSize(i.counts), i.itemWidth = 200), i.after = i.start = function(e) {
            var t = {
                slider: e
            };
            BX.onCustomEvent("onSlide", [t])
        }, i.end = function(e) {
            var t = {
                slider: e
            };
            BX.onCustomEvent("onSlideEnd", [t])
        }, t.flexslider(i).addClass("flexslider-init"), i.controlNav && t.addClass("flexslider-control-nav"), i.directionNav && t.addClass("flexslider-direction-nav"))
    })
}, InitZoomPict = function() {
    if ($(".zoom_picture").length) {
        var e, t = ($(".zoom_picture").closest(".slides"), $(".zoom_picture")),
            a = {
                zoomWidth: 200,
                zoomHeight: 200,
                adaptive: !1,
                title: !0,
                Xoffset: 15
            },
            i = $.extend({}, a, e, t.data("plugin-options"));
        t.xzoom(i)
    }
};
var arBasketAsproCounters = {};
if (SetActualBasketFlyCounters = function() {
        1 == arBasketAsproCounters.DEFAULT ? $.ajax({
            url: arOptimusOptions.SITE_DIR + "ajax/basket_fly.php",
            type: "post",
            success: function(e) {
                $("#basket_line .basket_fly").addClass("loaded").html(e)
            }
        }) : ($("#header .basket_fly .opener .basket_count .count").attr("class", "count" + (arBasketAsproCounters.READY.COUNT > 0 ? "" : " empty_items")).find(".items span").text(arBasketAsproCounters.READY.COUNT), $("#header .basket_fly .opener .basket_count + a").attr("href", arBasketAsproCounters.READY.HREF), $("#header .basket_fly .opener .basket_count").attr("title", arBasketAsproCounters.READY.TITLE).attr("class", "basket_count small clicked" + (arBasketAsproCounters.READY.COUNT > 0 ? "" : " empty")), $("#header .basket_fly .opener .wish_count .count").attr("class", "count" + (arBasketAsproCounters.DELAY.COUNT > 0 ? "" : " empty_items")).find(".items span").text(arBasketAsproCounters.DELAY.COUNT), $("#header .basket_fly .opener .wish_count + a").attr("href", arBasketAsproCounters.DELAY.HREF), $("#header .basket_fly .opener .wish_count").attr("title", arBasketAsproCounters.DELAY.TITLE).attr("class", "wish_count small clicked" + (arBasketAsproCounters.DELAY.COUNT > 0 ? "" : " empty")), $("#header .basket_fly .opener .compare_count .count").attr("class", "count" + (arBasketAsproCounters.COMPARE.COUNT > 0 ? "" : " empty_items")).find(".items span").text(arBasketAsproCounters.COMPARE.COUNT), $("#header .basket_fly .opener .compare_count + a").attr("href", arBasketAsproCounters.COMPARE.HREF), $("#header .basket_fly .opener .user_block").attr("title", arBasketAsproCounters.PERSONAL.TITLE).find("+ a").attr("href", arBasketAsproCounters.PERSONAL.HREF), $("#header .basket_fly .opener .user_block .wraps_icon_block").attr("class", "wraps_icon_block" + (arBasketAsproCounters.PERSONAL.ID > 0 ? " user_auth" : " user_reg") + (arBasketAsproCounters.PERSONAL.SRC ? " w_img" : " no_img")).attr("style", arBasketAsproCounters.PERSONAL.SRC ? 'background:url("' + arBasketAsproCounters.PERSONAL.SRC + '") center center no-repeat;' : ""))
    }, !funcDefined("setPriceItem")) var setPriceItem = function(e, t, a, i, o) {
    var n = e.find(".to-cart").attr("data-ratio"),
        s = "undefined" != typeof a && a ? a : e.find(".to-cart").attr("data-value"),
        r = e.find(".to-cart").attr("data-currency"),
        c = '<div class="total_summ"><div>' + BX.message("TOTAL_SUMM_ITEM") + "<span></span></div></div>",
        d = (e.find(".cost.prices"), "undefined" != typeof i && i);
    e.find(".buy_block").length ? e.find(".buy_block .total_summ").length || $(c).appendTo(e.find(".buy_block")) : e.find(".counter_wrapp").length && (e.find(".counter_wrapp .total_summ").length || $(c).appendTo(e.find(".counter_wrapp:first"))), e.find(".total_summ").length && (s && r ? 1 == t && n == t || "undefined" != typeof o && o && !d ? e.find(".total_summ").slideUp(200) : (e.find(".total_summ span").text(BX.Currency.currencyFormat(s * t, r, !0)), e.find(".total_summ").is(":hidden") && e.find(".total_summ").slideDown(200)) : e.find(".total_summ").slideUp(200))
};
if (!funcDefined("getCurrentPrice")) var getCurrentPrice = function(e, t, a) {
    var i = "",
        o = BX.Currency.currencyFormat(e, t);
    return a.indexOf(o) >= 0 ? (i = a.replace(o, '<span class="price_value">' + o + '</span><span class="price_currency">'), i += "</span>") : i = a, i
};
$(document).ready(function() {
    if (arOptimusOptions.PAGES.ORDER_PAGE) {
        var e = parseUrlQuery();
        if ("ORDER_ID" in e) {
            var t = e.ORDER_ID;
            if ("N" !== arOptimusOptions.COUNTERS.USE_FULLORDER_GOALS) {
                var a = {
                    goal: "goal_order_success",
                    result: t
                };
                BX.onCustomEvent("onCounterGoals", [a])
            }
            if (checkCounters() && "undefined" != typeof BX.localStorage) {
                var i = BX.localStorage.get("gtm_e_" + t);
                "object" == typeof i && dataLayer.push({
                    ecommerce: i
                }), "undefined" != typeof localStorage && localStorage.removeItem("gtm_e_" + t)
            }
        }
    }
    "Y" === arOptimusOptions.COUNTERS.USE_DEBUG_GOALS ? $.cookie("_ym_debug", 1, {
        path: "/"
    }) : $.cookie("_ym_debug", null, {
        path: "/"
    }), scrollToTop(), checkVerticalMobileFilter(), checkFormWidth(), jQuery.browser.safari ? setTimeout(function() {
        $(window).resize(), setTimeout(function() {
            InitTopestMenuGummi(), InitTopMenuGummi(), isOnceInited = !0, InitFlexSlider();
            try {
                $("header .wrap_menu").css({
                    overflow: "visible"
                }), $(".visible_on_ready").removeClass("visible_on_ready")
            } catch (e) {
                console.error(e)
            }
            setTimeout(function() {
                $(window).scroll()
            }, 50)
        }, 50)
    }, 350) : setTimeout(function() {
        InitTopestMenuGummi(), InitTopMenuGummi(), isOnceInited = !0, InitFlexSlider();
        try {
            $("header .wrap_menu").css({
                overflow: "visible"
            }), $(".visible_on_ready").removeClass("visible_on_ready")
        } catch (e) {
            console.error(e)
        }
    }, 100), InitZoomPict(), $("body").on("click", ".captcha_reload", function(e) {
        var t = $(this).parents(".captcha-row");
        e.preventDefault(), $.ajax({
            url: arOptimusOptions.SITE_DIR + "ajax/captcha.php"
        }).done(function(e) {
            t.find("input[name=captcha_sid]").val(e), t.find("img").attr("src", "/bitrix/tools/captcha.php?captcha_sid=" + e), t.find("input[name=captcha_word]").val("").removeClass("error"), t.find(".captcha_input").removeClass("error").find(".error").remove()
        })
    }), setTimeout(function() {
        $(".bg_image_site").css({
            opacity: 1
        })
    }, 200), window.matchMedia("(min-width: 768px)").matches && $(".wrapper_middle_menu.wrap_menu").removeClass("mobile"), window.matchMedia("(max-width: 767px)").matches && $(".wrapper_middle_menu.wrap_menu").addClass("mobile"), setTimeout(function() {
        $(window).scroll()
    }, 400), $(".show_props").live("click", function() {
        $(this).prev(".props_list_wrapp").stop().slideToggle(333), $(this).find(".char_title").toggleClass("opened")
    }), $(".see_more").live("click", function(e) {
        e.preventDefault();
        var t = $(this).is(".see_more") ? $(this) : $(this).parents(".see_more").first(),
            a = t.find("> a").length ? t.find("> a") : t,
            i = t.parent().find("> .d");
        return t.hasClass("open") ? (a.text(BX.message("CATALOG_VIEW_MORE")), t.removeClass("open"), i.hide()) : (a.text(BX.message("CATALOG_VIEW_LESS")), t.addClass("open"), i.show()), !1
    }), $(".button.faq_button").click(function(e) {
        e.preventDefault(), $(this).toggleClass("opened"), $(".faq_ask .form").slideToggle()
    }), $(".staff.list .staff_section .staff_section_title a").click(function(e) {
        e.preventDefault(), $(this).parents(".staff_section").toggleClass("opened"), $(this).parents(".staff_section").find(".staff_section_items").stop().slideToggle(600), $(this).parents(".staff_section_title").find(".opener_icon").toggleClass("opened")
    }), $(".jobs_wrapp .item .name").click(function(e) {
        $(this).closest(".item").toggleClass("opened"), $(this).closest(".item").find(".description_wrapp").stop().slideToggle(600), $(this).closest(".item").find(".opener_icon").toggleClass("opened")
    }), $(".faq.list .item .q a").live("click", function(e) {
        e.preventDefault(), $(this).parents(".item").toggleClass("opened"), $(this).parents(".item").find(".a").stop().slideToggle(), $(this).parents(".item").find(".q .opener_icon").toggleClass("opened")
    }), $(".opener_icon").click(function(e) {
        e.preventDefault(), $(this).parent().find("a").trigger("click")
    }), $(".to-order").live("click", function(e) {
        e.preventDefault(), $("body").append("<span class='evb-toorder' style='display:none;'></span>"), jqmEd("to-order", arOptimusOptions.FORM.TOORDER_FORM_ID, ".evb-toorder", "", this), $("body .evb-toorder").click(), $("body .evb-toorder").remove()
    }), $(".dotdot").dotdotdot(), $(".more_block span").live("click", function() {
        var e = $(".catalog_detail .tabs_section").offset();
        $("html, body").animate({
            scrollTop: e.top - 23
        }, 400)
    }), $(".counter_block:not(.basket) .plus").live("click", function() {
        if (!$(this).parents(".basket_wrapp").length && "Y" != $(this).parent().data("offers")) {
            var e = $(this).parents(".counter_block_wr").length;
            input = $(this).parents(".counter_block").find("input[type=text]"), tmp_ratio = e ? $(this).parents("tr").first().find("td.buy .to-cart").data("ratio") : $(this).parents(".counter_wrapp").find(".to-cart").data("ratio"), isDblQuantity = e ? $(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio") : $(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio"), ratio = isDblQuantity ? parseFloat(tmp_ratio) : parseInt(tmp_ratio, 10), max_value = "", currentValue = input.val(), isDblQuantity && (ratio = Math.round(ratio * arOptimusOptions.JS_ITEM_CLICK.precisionFactor) / arOptimusOptions.JS_ITEM_CLICK.precisionFactor), curValue = isDblQuantity ? parseFloat(currentValue) : parseInt(currentValue, 10), curValue += ratio, isDblQuantity && (curValue = Math.round(curValue * arOptimusOptions.JS_ITEM_CLICK.precisionFactor) / arOptimusOptions.JS_ITEM_CLICK.precisionFactor), parseFloat($(this).data("max")) > 0 ? input.val() <= $(this).data("max") && (curValue <= $(this).data("max") && input.val(curValue), input.change()) : (input.val(curValue), input.change())
        }
    }), $(".counter_block:not(.basket) .minus").live("click", function() {
        if (!$(this).parents(".basket_wrapp").length && "Y" != $(this).parent().data("offers")) {
            var e = $(this).parents(".counter_block_wr").length;
            input = $(this).parents(".counter_block").find("input[type=text]"), tmp_ratio = e ? $(this).parents("tr").first().find("td.buy .to-cart").data("ratio") : $(this).parents(".counter_wrapp").find(".to-cart").data("ratio"), isDblQuantity = e ? $(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio") : $(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio"), ratio = isDblQuantity ? parseFloat(tmp_ratio) : parseInt(tmp_ratio, 10), max_value = "", currentValue = input.val(), isDblQuantity && (ratio = Math.round(ratio * arOptimusOptions.JS_ITEM_CLICK.precisionFactor) / arOptimusOptions.JS_ITEM_CLICK.precisionFactor), curValue = isDblQuantity ? parseFloat(currentValue) : parseInt(currentValue, 10), curValue -= ratio, isDblQuantity && (curValue = Math.round(curValue * arOptimusOptions.JS_ITEM_CLICK.precisionFactor) / arOptimusOptions.JS_ITEM_CLICK.precisionFactor), parseFloat($(this).parents(".counter_block").find(".plus").data("max")) > 0 ? currentValue > ratio && (curValue < ratio ? input.val(ratio) : input.val(curValue), input.change()) : (curValue > ratio ? input.val(curValue) : ratio ? input.val(ratio) : currentValue > 1 && input.val(curValue), input.change())
        }
    }), $(".counter_block input[type=text]").numeric({
        allow: "."
    }), $(".counter_block input[type=text]").live("focus", function() {
        $(this).addClass("focus")
    }), $(".counter_block input[type=text]").live("blur", function() {
        $(this).removeClass("focus")
    }), $(".counter_block input[type=text]").live("change", function(e) {
        if (!$(this).parents(".basket_wrapp").length) {
            var t = $(this).val(),
                a = $(this).parents(".counter_wrapp").find(".to-cart").data("ratio") ? $(this).parents(".counter_wrapp").find(".to-cart").data("ratio") : $(this).parents("tr").first().find("td.buy .to-cart").data("ratio"),
                i = $(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio") ? $(this).parents(".counter_wrapp").find(".to-cart").data("float_ratio") : $(this).parents("tr").first().find("td.buy .to-cart").data("float_ratio"),
                o = i ? parseFloat(a) : parseInt(a, 10);
            i && (o = Math.round(o * arOptimusOptions.JS_ITEM_CLICK.precisionFactor) / arOptimusOptions.JS_ITEM_CLICK.precisionFactor), $(this).hasClass("focus") && (t -= t % o), parseFloat($(this).parents(".counter_block").find(".plus").data("max")) > 0 && t > parseFloat($(this).parents(".counter_block").find(".plus").data("max")) && (t = parseFloat($(this).parents(".counter_block").find(".plus").data("max")), t -= t % o), o > t ? t = o : parseFloat(t) || (t = 1), $(this).parents(".counter_block").parent().parent().find(".to-cart").attr("data-quantity", t), $(this).parents(".counter_block").parent().parent().find(".one_click").attr("data-quantity", t), $(this).val(t);
            var n = {
                type: "change",
                params: {
                    id: $(this),
                    value: t
                }
            };
            BX.onCustomEvent("onCounterProductAction", [n])
        }
    }), BX.addCustomEvent("onCounterProductAction", function(e) {
        "object" != typeof e && (e = {
            type: "undefined"
        });
        try {
            if ("undefined" != typeof e.type && !e.params.id.closest(".gifts").length) {
                var t = e.params.id.data("product");
                "object" == typeof window[t] ? window[t].setPriceAction("Y") : e.params.id.length && e.params.id.closest(".main_item_wrapper").length && "Y" == arOptimusOptions.THEME.SHOW_TOTAL_SUMM && setPriceItem(e.params.id.closest(".main_item_wrapper"), e.params.value), BX.onCustomEvent("onCounterProductActionResize")
            }
        } catch (a) {
            console.error(a)
        }
    }), $(document).on("mouseenter", "#basket_line .basket_normal:not(.empty_cart):not(.bcart) .basket_block ", function() {
        $(this).closest(".basket_normal").find(".popup").addClass("block"), $(this).closest(".basket_normal").find(".basket_popup_wrapp").stop(!0, !0).slideDown(150)
    }), $(document).on("mouseleave", "#basket_line .basket_normal .basket_block ", function() {
        var e = $(this);
        $(this).closest(".basket_normal").find(".basket_popup_wrapp").stop(!0, !0).slideUp(150, function() {
            e.closest(".basket_normal").find(".popup").removeClass("block")
        })
    }), $(document).on("click", ".popup_button_basket", function() {
        var e = $(".to-cart[data-item=" + $(this).data("item") + "]"),
            t = e.attr("data-quantity");
        t || ($val = 1);
        var a = e.data("props"),
            i = "",
            o = "",
            n = "N",
            s = {},
            r = e.data("iblockid"),
            c = e.data("offers"),
            d = "",
            l = "",
            u = e.attr("data-item");
        "Y" != c ? c = "N" : l = e.closest(".prices_tab").find(".bx_sku_props input").val(), a && (i = a.split(";")), e.data("part_props") && (o = e.data("part_props")), e.data("add_props") && (n = e.data("add_props")), $(".rid_item").length ? d = $(".rid_item").data("rid") : e.data("rid") && (d = e.data("rid")), s = fillBasketPropsExt(e, "prop", "bx_ajax_text"), s.quantity = t, s.add_item = "Y", s.rid = d, s.offers = c, s.iblockID = r, s.part_props = o, s.add_props = n, s.props = JSON.stringify(i), s.item = u, s.basket_props = l, $.ajax({
            type: "POST",
            url: arOptimusOptions.SITE_DIR + "ajax/item.php",
            data: s,
            dataType: "json",
            success: function(t) {
                $(".basket_error_frame").jqmHide(), "STATUS" in t ? (getActualBasket(s.iblockID), "OK" === t.STATUS ? (e.hide(), e.closest(".counter_wrapp").find(".counter_block").hide(), e.parents("tr").find(".counter_block_wr .counter_block").hide(), e.closest(".button_block").addClass("wide"), e.parent().find(".in-cart").show(), addBasketCounter(u), $(".wish_item[data-item=" + u + "]").removeClass("added"), $(".wish_item[data-item=" + u + "]").find(".value").show(), $(".wish_item[data-item=" + u + "]").find(".value.added").hide(), $("#basket_line .cart").length ? ($("#basket_line .cart").is(".empty_cart") && ($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"), $("#basket_line .cart").removeClass("ecart"), touchBasket(".cart:not(.empty_cart) .basket_block .link")), reloadTopBasket("add", $("#basket_line"), 200, 5e3, "Y")) : $("#basket_line .basket_fly").length && basketFly($(window).outerWidth() > 768 ? "open" : "refresh")) : showBasketError(BX.message(t.MESSAGE))) : showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR"))
            }
        })
    }), $(document).on("click", ".to-cart:not(.read_more)", function(e) {
        e.preventDefault();
        var t = $(this),
            a = $(this).attr("data-quantity");
        a || ($val = 1);
        var i = $(this).data("props"),
            o = "",
            n = "",
            s = "N",
            r = {},
            c = $(this).data("iblockid"),
            d = $(this).data("offers"),
            l = "",
            u = "",
            p = $(this).attr("data-item");
        "Y" != d ? d = "N" : u = $(this).closest(".prices_tab").find(".bx_sku_props input").val(), i && (o = i.split(";")), $(this).data("part_props") && (n = $(this).data("part_props")), $(this).data("add_props") && (s = $(this).data("add_props")), $(".rid_item").length ? l = $(".rid_item").data("rid") : $(this).data("rid") && (l = $(this).data("rid")), r = fillBasketPropsExt(t, "prop", t.data("bakset_div")), r.quantity = a, r.add_item = "Y", r.rid = l, r.offers = d, r.iblockID = c, r.part_props = n, r.add_props = s, r.props = JSON.stringify(o), r.item = p, r.basket_props = u, "N" == t.data("empty_props") ? showBasketError($("#" + t.data("bakset_div")).html(), BX.message("ERROR_BASKET_PROP_TITLE"), "Y", t) : $.ajax({
            type: "POST",
            url: arOptimusOptions.SITE_DIR + "ajax/item.php",
            data: r,
            dataType: "json",
            success: function(e) {
                getActualBasket(r.iblockID), null !== e ? "STATUS" in e ? (null === e.MESSAGE_EXT && (e.MESSAGE_EXT = ""), "OK" === e.STATUS ? (t.hide(), t.closest(".counter_wrapp").find(".counter_block").hide(), t.parents("tr").find(".counter_block_wr .counter_block").hide(), t.closest(".button_block").addClass("wide"), t.parent().find(".in-cart").show(), addBasketCounter(p), $(".wish_item[data-item=" + p + "]").removeClass("added"), $(".wish_item[data-item=" + p + "]").find(".value").show(), $(".wish_item[data-item=" + p + "]").find(".value.added").hide(), $("#basket_line .cart").length ? ($("#basket_line .cart").is(".empty_cart") && ($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"), $("#basket_line .cart").removeClass("ecart"), touchBasket(".cart:not(.empty_cart) .basket_block .link")), reloadTopBasket("add", $("#basket_line"), 200, 5e3, "Y")) : $("#basket_line .basket_fly").length && basketFly($(window).outerWidth() > 768 ? "open" : "refresh")) : showBasketError(BX.message(e.MESSAGE) + " <br/>" + e.MESSAGE_EXT)) : showBasketError(BX.message("CATALOG_PARTIAL_BASKET_PROPERTIES_ERROR")) : (t.hide(), t.closest(".counter_wrapp").find(".counter_block").hide(), t.parents("tr").find(".counter_block_wr .counter_block").hide(), t.closest(".button_block").addClass("wide"), t.parent().find(".in-cart").show(), addBasketCounter(p), $(".wish_item[data-item=" + p + "]").removeClass("added"), $(".wish_item[data-item=" + p + "]").find(".value").show(), $(".wish_item[data-item=" + p + "]").find(".value.added").hide(), $("#basket_line .cart").length ? ($("#basket_line .cart").is(".empty_cart") && ($("#basket_line .cart").removeClass("empty_cart").find(".cart_wrapp a.basket_link").removeAttr("href").addClass("cart-call"), $("#basket_line .cart").removeClass("ecart"), touchBasket(".cart:not(.empty_cart) .basket_block .link")), reloadTopBasket("add", $("#basket_line"), 200, 5e3, "Y")) : $("#basket_line .basket_fly").length && $(window).outerWidth() > 768 && basketFly("open"))
            }
        })
    }), $(document).on("click", ".to-subscribe", function(e) {
        if (e.preventDefault(), $(this).is(".auth")) location.href = arOptimusOptions.SITE_DIR + "auth/?backurl=" + location.pathname;
        else {
            var t = $(this).attr("data-item"),
                a = $(this).attr("data-iblockid");
            $(this).hide(), $(this).parent().find(".in-subscribe").show(), $.get(arOptimusOptions.SITE_DIR + "ajax/item.php?item=" + t + "&subscribe_item=Y", $.proxy(function(e) {
                $(".wish_item[data-item=" + t + "]").removeClass("added"), getActualBasket(a)
            }))
        }
    }), $(document).on("click", ".in-subscribe", function(e) {
        e.preventDefault();
        var t = $(this).attr("data-item"),
            a = $(this).attr("data-iblockid");
        $(this).hide(), $(this).parent().find(".to-subscribe").show(), $.get(arOptimusOptions.SITE_DIR + "ajax/item.php?item=" + t + "&subscribe_item=Y", $.proxy(function(e) {
            getActualBasket(a)
        }))
    }), $(document).on("click", ".wish_item", function(e) {
        e.preventDefault();
        var t = $(this).attr("data-quantity"),
            a = $(this).data("offers"),
            i = $(this).data("iblock"),
            o = $(this).data("props"),
            n = "",
            s = $(this).data("item");
        item2 = $(this).attr("data-item"), t || ($val = 1), "Y" != a && (a = "N"), o && (n = o.split(";")), $(this).hasClass("text") ? $(this).hasClass("added") ? ($(".wish_item[data-item=" + s + "]").removeClass("added"), $(".wish_item[data-item=" + s + "]").find(".value").show(), $(".wish_item[data-item=" + s + "]").find(".value.added").hide(), $(".like_icons").each(function() {
            $(this).find(".wish_item_button").length && ($(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').removeClass("added"), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value").show(), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value.added").hide())
        })) : ($(".wish_item[data-item=" + s + "]").addClass("added"), $(".wish_item[data-item=" + s + "]").find(".value").hide(), $(".wish_item[data-item=" + s + "]").find(".value.added").css("display", "block"), $(".like_icons").each(function() {
            $(this).find(".wish_item_button").length && ($(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').addClass("added"), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value").hide(), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value.added").show())
        })) : $(this).hasClass("added") ? ($(this).hide(), $(this).closest(".wish_item_button").find(".to").show(), $(".like_icons").each(function() {
            $(this).find('.wish_item.text[data-item="' + s + '"]').length && ($(this).find('.wish_item.text[data-item="' + s + '"]').removeClass("added"), $(this).find('.wish_item.text[data-item="' + s + '"]').find(".value").show(), $(this).find('.wish_item.text[data-item="' + s + '"]').find(".value.added").hide()), $(this).find(".wish_item_button").length && ($(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').removeClass("added"), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value").show(), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value.added").hide())
        })) : ($(this).hide(), $(this).closest(".wish_item_button").find(".in").addClass("added").show(), $(".like_icons").each(function() {
            $(this).find('.wish_item.text[data-item="' + s + '"]').length && ($(this).find('.wish_item.text[data-item="' + s + '"]').addClass("added"), $(this).find('.wish_item.text[data-item="' + s + '"]').find(".value").hide(), $(this).find('.wish_item.text[data-item="' + s + '"]').find(".value.added").css({
                display: "block"
            })), $(this).find(".wish_item_button").length && ($(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').addClass("added"), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value").hide(), $(this).find(".wish_item_button").find('.wish_item[data-item="' + s + '"]').find(".value.added").show())
        })), $(".in-cart[data-item=" + s + "]").hide(), $(".to-cart[data-item=" + s + "]").parent().removeClass("wide"), $(".to-cart[data-item=" + s + "]").show(), $(".counter_block[data-item=" + s + "]").show(), $(this).closest(".module-cart").size() || $.ajax({
            type: "GET",
            url: arOptimusOptions.SITE_DIR + "ajax/item.php",
            data: "item=" + item2 + "&quantity=" + t + "&wish_item=Y&offers=" + a + "&iblockID=" + i + "&props=" + JSON.stringify(n),
            dataType: "json",
            success: function(e) {
                if (getActualBasket(i), null !== e)
                    if (null === e.MESSAGE_EXT && (e.MESSAGE_EXT = ""), "STATUS" in e)
                        if ("OK" === e.STATUS) {
                            if ("N" !== arOptimusOptions.COUNTERS.USE_BASKET_GOALS) {
                                var t = {
                                    goal: "goal_wish_add",
                                    params: {
                                        id: item2
                                    }
                                };
                                BX.onCustomEvent("onCounterGoals", [t])
                            }
                            $("#basket_line .cart").size() ? reloadTopBasket("wish", $("#basket_line"), 200, 5e3, "N") : basketFly("wish")
                        } else showBasketError(BX.message(e.MESSAGE) + " <br/>" + e.MESSAGE_EXT, BX.message("ERROR_ADD_DELAY_ITEM"));
                else showBasketError(BX.message(e.MESSAGE) + " <br/>" + e.MESSAGE_EXT, BX.message("ERROR_ADD_DELAY_ITEM"));
                else $("#basket_line .cart").size() ? reloadTopBasket("wish", $("#basket_line"), 200, 5e3, "N") : basketFly("wish")
            }
        })
    }), $(document).on("click", ".compare_item", function(e) {
        e.preventDefault();
        var t = $(this).attr("data-item"),
            a = $(this).attr("data-iblock");
        $(this).hasClass("text") ? $(this).hasClass("added") ? ($(".compare_item[data-item=" + t + "]").removeClass("added"), $(".compare_item[data-item=" + t + "]").find(".value").show(), $(".compare_item[data-item=" + t + "]").find(".value.added").hide(), $(".like_icons").each(function() {
            $(this).find(".compare_item_button").length && ($(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').removeClass("added"), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value").show(), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value.added").hide())
        })) : ($(".compare_item[data-item=" + t + "]").addClass("added"), $(".compare_item[data-item=" + t + "]").find(".value").hide(), $(".compare_item[data-item=" + t + "]").find(".value.added").css("display", "block"), $(".like_icons").each(function() {
            $(this).find(".compare_item_button").length && ($(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').addClass("added"), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value.added").show(), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value").hide())
        })) : $(this).hasClass("added") ? ($(this).hide(), $(this).closest(".compare_item_button").find(".to").show(), $(".like_icons").each(function() {
            $(this).find('.compare_item.text[data-item="' + t + '"]').length && ($(this).find('.compare_item.text[data-item="' + t + '"]').removeClass("added"), $(this).find('.compare_item.text[data-item="' + t + '"]').find(".value").show(), $(this).find('.compare_item.text[data-item="' + t + '"]').find(".value.added").hide()), $(this).find(".compare_item_button").length && ($(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').removeClass("added"), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value").show(), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value.added").hide());
        })) : ($(this).hide(), $(this).closest(".compare_item_button").find(".in").show(), $(".like_icons").each(function() {
            $(this).find('.compare_item.text[data-item="' + t + '"]').length && ($(this).find('.compare_item.text[data-item="' + t + '"]').addClass("added"), $(this).find('.compare_item.text[data-item="' + t + '"]').find(".value").hide(), $(this).find('.compare_item.text[data-item="' + t + '"]').find(".value.added").css({
                display: "block"
            })), $(this).find(".compare_item_button").length && ($(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').addClass("added"), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value.added").show(), $(this).find(".compare_item_button").find('.compare_item[data-item="' + t + '"]').find(".value").hide())
        })), $.get(arOptimusOptions.SITE_DIR + "ajax/item.php?item=" + t + "&compare_item=Y&iblock_id=" + a, $.proxy(function(e) {
            getActualBasket(a), jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR + "ajax/show_compare_preview_top.php", "compare_line", !1), $("#compare_fly").length && jsAjaxUtil.InsertDataToNode(arOptimusOptions.SITE_DIR + "ajax/show_compare_preview_fly.php", "compare_fly", !1)
        }))
    }), $(".fancy").fancybox({
        openEffect: "fade",
        closeEffect: "fade",
        nextEffect: "fade",
        prevEffect: "fade",
        tpl: {
            closeBtn: '<a title="' + BX.message("FANCY_CLOSE") + '" class="fancybox-item fancybox-close" href="javascript:;"></a>',
            next: '<a title="' + BX.message("FANCY_NEXT") + '" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
            prev: '<a title="' + BX.message("FANCY_PREV") + '" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
        }
    }), $(".tabs>li").on("click", function() {
        if (!$(this).hasClass("active")) {
            var e = $(this).index(),
                t = $(this).closest(".top_blocks").find(".slider_navigation").find(">li:eq(" + e + ")"),
                a = $(this).closest(".top_blocks").siblings(".tabs_content").find(">li:eq(" + e + ")");
            $(this).addClass("active").addClass("cur").siblings().removeClass("active").removeClass("cur"), a.addClass("cur").siblings().removeClass("cur"), t.addClass("cur").siblings().removeClass("cur"), a.find(".catalog_block .catalog_item_wrapp .catalog_item .item_info:visible .item-title").sliceHeight({
                item: ".catalog_item:visible",
                resize: !1
            }), a.find(".catalog_block .catalog_item_wrapp .catalog_item .item_info:visible").sliceHeight({
                classNull: ".footer_button",
                item: ".catalog_item:visible",
                resize: !1
            }), a.find(".catalog_block .catalog_item_wrapp .catalog_item:visible").sliceHeight({
                classNull: ".footer_button",
                item: ".catalog_item:visible",
                resize: !1
            })
        }
    }), $(".search_block .icon").on("click", function() {
        var e = $(this);
        $(this).hasClass("open") ? ($(this).closest(".center_block").find(".search_middle_block").removeClass("active"), $(this).removeClass("open"), $(this).closest(".center_block").find(".search_middle_block").find(".noborder").hide()) : (setTimeout(function() {
            e.closest(".center_block").find(".search_middle_block").find(".noborder").show()
        }, 100), $(this).closest(".center_block").find(".search_middle_block").addClass("active"), $(this).addClass("open"))
    }), $(document).on("mouseenter", ".display_list .item_wrap", function() {
        $(this).prev().addClass("prev")
    }), $(document).on("mouseleave", ".display_list .item_wrap", function() {
        $(this).prev().removeClass("prev")
    }), $(document).on("mouseenter", ".catalog_block .item_wrap", function() {
        $(this).addClass("shadow_delay")
    }), $(document).on("mouseleave", ".catalog_block .item_wrap", function() {
        $(this).removeClass("shadow_delay")
    }), $(document).on("click", ".no_goods .button", function() {
        $(".bx_filter .smartfilter .bx_filter_search_reset").trigger("click")
    }), $(document).on("click", ".ajax_load_btn", function() {
        var e = $(this).closest(".right_block").find(".module-pagination .flex-direction-nav .flex-next").attr("href"),
            t = $(this).find(".more_text_ajax");
        t.addClass("loading"), $.ajax({
            url: e,
            data: {
                ajax_get: "Y"
            },
            success: function(e) {
                $.parseHTML(e);
                t.removeClass("loading"), $(".display_list").length ? $(".display_list").append(e) : $(".block_list").length ? ($(".block_list").append(e), touchItemBlock(".catalog_item a")) : $(".module_products_list").length && $(".module_products_list > tbody").append(e), setStatusButton(), initCountdown(), BX.onCustomEvent("onAjaxSuccess"), $(".bottom_nav").html($(e).find(".bottom_nav").html())
            }
        })
    }), $(document).on("click", ".bx_compare .tabs-head li", function() {
        var e = $(this).find(".sortbutton").data("href");
        BX.showWait(BX("bx_catalog_compare_block")), $.ajax({
            url: e,
            data: {
                ajax_action: "Y"
            },
            success: function(t) {
                history.pushState(null, null, e), $("#bx_catalog_compare_block").html(t), BX.closeWait()
            }
        })
    });
    var o;
    $(document).on({
        mouseover: function(e) {
            var t = $(this),
                a = t.closest("tbody").index() + 1,
                i = t.index() + 1;
            o = $(e.delegateTarget).find(".data_table_props").children(":nth-child(" + a + ")").children(":nth-child(" + i + ")").addClass("hovered")
        },
        mouseleave: function(e) {
            o && o.removeClass("hovered")
        }
    }, ".bx_compare .data_table_props tbody>tr"), $(document).on("click", ".fancy_offer", function(e) {
        e.preventDefault();
        var t = [];
        $(".sliders .slides_block li").each(function() {
            var e = {};
            e = {
                title: $(this).find("img").attr("alt"),
                href: $(this).data("big")
            }, $(this).hasClass("current") ? t.unshift(e) : t.push(e)
        }), $.fancybox(t, {
            openEffect: "fade",
            closeEffect: "fade",
            nextEffect: "fade",
            prevEffect: "fade",
            type: "image",
            tpl: {
                closeBtn: '<a title="' + BX.message("FANCY_CLOSE") + '" class="fancybox-item fancybox-close" href="javascript:;"></a>',
                next: '<a title="' + BX.message("FANCY_NEXT") + '" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
                prev: '<a title="' + BX.message("FANCY_PREV") + '" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
            }
        })
    }), $(".tabs_section .tabs-head li").live("click", function() {
        $(this).is(".current") || ($(".tabs_section .tabs-head li").removeClass("current"), $(this).addClass("current"), $(".tabs_section ul.tabs_content li").removeClass("current"), "product_reviews_tab" == $(this).attr("id") ? ($(".shadow.common").hide(), $("#reviews_content").show()) : ($(".shadow.common").show(), $("#reviews_content").hide(), $(".tabs_section ul.tabs_content > li:eq(" + $(this).index() + ")").addClass("current")))
    }), setTimeout(function() {
        $(".jobs_wrapp .item:first .name tr").trigger("click")
    }, 300), $(document).on("click", ".buy_block .slide_offer", function() {
        scroll_block($(".tabs_section"))
    }), $(".share_wrapp .text").on("click", function() {
        $(this).parent().find(".shares").fadeToggle()
    }), $("html, body").live("mousedown", function(e) {
        e.stopPropagation(), $(".shares").fadeOut(), $(".search_middle_block").removeClass("active_wide")
    }), $(".share_wrapp").find("*").live("mousedown", function(e) {
        e.stopPropagation()
    }), $(document).on("click", ".reviews-collapse-link", function() {
        $(".reviews-reply-form").slideToggle()
    }), initCountdown(), $(".menu.adaptive").on("click", function() {
        $(this).toggleClass("opened"), $(this).hasClass("opened") ? $(".mobile_menu").toggleClass("opened").slideDown() : $(".mobile_menu").toggleClass("opened").slideUp()
    }), $(".mobile_menu .has-child >a").on("click", function(e) {
        var t = $(this).parent();
        e.preventDefault(), t.toggleClass("opened"), t.find(".dropdown").slideToggle()
    }), $(".mobile_menu .search-input-div input").live("keyup", function(e) {
        var t = $(this).val();
        $(".center_block .stitle_form input").val(t), 13 == e.keyCode && $(".center_block .stitle_form form").submit()
    }), $(".center_block .stitle_form input").live("keyup", function(e) {
        var t = $(this).val();
        $(".mobile_menu .search-input-div input").val(t), 13 == e.keyCode && $(".center_block .stitle_form form").submit()
    }), $(".mobile_menu .search-button-div button").live("click", function(e) {
        e.preventDefault();
        var t = $(this).parents().find("input").val();
        $(".center_block .stitle_form input").val(t), $(".center_block .stitle_form form").submit()
    }), $(".btn.btn-add").on("click", function() {
        $.ajax({
            type: "GET",
            url: arOptimusOptions.SITE_DIR + "ajax/clearBasket.php",
            success: function(e) {}
        })
    }), $(".sale-order-detail-payment-options-methods-info-change-link").on("click", function() {
        $(this).closest(".sale-order-detail-payment-options-methods-info").addClass("opened").siblings().addClass("opened")
    }), $(document).on("click", ".expand_block", function() {
        togglePropBlock($(this))
    }), document.addEventListener("touchend", function(e) {
        if ($(e.target).closest(".menu_item_l1").length || ($(".menu .menu_item_l1 .child").css({
                display: "none"
            }), $(".menu_item_l1").removeClass("hover")), $(e.target).closest(".basket_block").length || ($(".basket_block .link").removeClass("hover"), $(".basket_block .basket_popup_wrapp").slideUp()), !$(e.target).closest(".catalog_item").length) {
            var t = 1 * $(".tab:visible").attr("data-unhover");
            t && $(".tab:visible").stop().animate({
                height: t
            }, 100), $(".tab:visible").find(".catalog_item").removeClass("hover"), $(".tab:visible").find(".catalog_item .buttons_block").stop().fadeOut(233), $(".catalog_block").length && $(".catalog_block").find(".catalog_item").removeClass("hover")
        }
    }, !1), $(document).on("keyup", ".coupon .input_coupon input", function() {
        $(this).val().length ? ($(this).removeClass("error"), $(this).closest(".input_coupon").find(".error").remove()) : ($(this).addClass("error"), $("<label class='error'>" + BX.message("INPUT_COUPON") + "</label>").insertBefore($(this)))
    }), showPhoneMask("input[autocomplete=tel]"), BX.addCustomEvent(window, "onAjaxSuccess", function(e) {
        "OK" != e && (initSelects(document), InitOrderCustom(), showPhoneMask("input[autocomplete=tel]"), $(".catalog_detail").length && ($(".bx_filter").remove(), InitFlexSlider()), arOptimusOptions.PAGES.CATALOG_PAGE && (setStatusButton(), initCountdown()), arOptimusOptions.PAGES.ORDER_PAGE && orderActions(e))
    }), BX.addCustomEvent(window, "onFrameDataRequestFail", function(e) {
        console.log(e)
    })
}), funcDefined("togglePropBlock") || (togglePropBlock = function(e) {
    var t = e.closest(".bx_filter_parameters_box_container").find(".hidden_values");
    t.length && (e.hasClass("inner_text") || e.hasClass("expand_block")) && (t.is(":visible") ? (e.text(BX.message("FILTER_EXPAND_VALUES")), t.hide()) : (e.text(BX.message("FILTER_HIDE_VALUES")), t.show()))
}), funcDefined("showPhoneMask") || (showPhoneMask = function(e) {
    $(e).inputmask("mask", {
        mask: arOptimusOptions.THEME.PHONE_MASK,
        showMaskOnHover: !1
    })
}), funcDefined("parseUrlQuery") || (parseUrlQuery = function() {
    var e = {};
    if (location.search)
        for (var t = location.search.substr(1).split("&"), a = 0; a < t.length; a++) {
            var i = t[a].split("=");
            e[i[0]] = i[1]
        }
    return e
}), funcDefined("getActualBasket") || (getActualBasket = function(e) {
    var t = "";
    "undefined" != typeof e && (t = {
        iblockID: e
    }), $.ajax({
        type: "GET",
        url: arOptimusOptions.SITE_DIR + "ajax/actualBasket.php",
        data: t,
        success: function(e) {
            $(".js_ajax").length || $("body").append('<div class="js_ajax"></div>'), $(".js_ajax").html(e)
        }
    })
}), funcDefined("orderActions") || (orderActions = function(e) {
    if (arOptimusOptions.PAGES.ORDER_PAGE && $(".bx-soa-cart-total").length) {
        if ($(".change_basket").length || $(".bx-soa-cart-total").prepend('<div class="change_basket">' + BX.message("BASKET_CHANGE_TITLE") + '<a href="' + arOptimusOptions.SITE_DIR + 'basket/" class="change_link">' + BX.message("BASKET_CHANGE_LINK") + "</a></div>"), "object" == typeof BX.Sale.OrderAjaxComponent) {
            if ("N" !== arOptimusOptions.COUNTERS.USE_FULLORDER_GOALS && "undefined" == typeof BX.Sale.OrderAjaxComponent.reachgoalbegin) {
                BX.Sale.OrderAjaxComponent.reachgoalbegin = !0;
                var t = {
                    goal: "goal_order_begin"
                };
                BX.onCustomEvent("onCounterGoals", [t])
            }
            $(".bx-soa-cart-total-line-total").length && !$(".licence_block.filter").length && "Y" == arOptimusOptions.THEME.SHOW_LICENCE && ("undefined" == typeof e && (BX.Sale.OrderAjaxComponent.state_licence = "Y" == arOptimusOptions.THEME.LICENCE_CHECKED ? "checked" : ""), $('<div class="form"><div class="licence_block filter label_block"><label data-for="licenses_order" class="hidden error">' + BX.message("JS_REQUIRED_LICENSES") + '</label><input type="checkbox" name="licenses_order" required ' + BX.Sale.OrderAjaxComponent.state_licence + ' value="Y"><label data-for="licenses_order" class="license">' + BX.message("LICENSES_TEXT") + "</label></div></div>").insertBefore($("#bx-soa-orderSave")), $("#bx-soa-orderSave, .bx-soa-cart-total-button-container").addClass("lic_condition"), "undefined" == typeof BX.Sale.OrderAjaxComponent.oldClickOrderSaveAction && "undefined" != typeof BX.Sale.OrderAjaxComponent.clickOrderSaveAction && (BX.Sale.OrderAjaxComponent.oldClickOrderSaveAction = BX.Sale.OrderAjaxComponent.clickOrderSaveAction, BX.Sale.OrderAjaxComponent.clickOrderSaveAction = function(e) {
                $('input[name="licenses_order"]').prop("checked") ? ($(".bx-soa .licence_block label.error").addClass("hidden"), BX.Sale.OrderAjaxComponent.isValidForm() && ("function" == typeof BX.Sale.OrderAjaxComponent.allowOrderSave && BX.Sale.OrderAjaxComponent.allowOrderSave(), "function" == typeof BX.Sale.OrderAjaxComponent.doSaveAction ? BX.Sale.OrderAjaxComponent.doSaveAction() : BX.Sale.OrderAjaxComponent.oldClickOrderSaveAction(e))) : $(".bx-soa .licence_block label.error").removeClass("hidden")
            }, BX.Sale.OrderAjaxComponent.orderSaveBlockNode.querySelector(".checkbox") && BX.Sale.OrderAjaxComponent.orderSaveBlockNode.querySelector(".checkbox").remove(), BX.unbindAll(BX.Sale.OrderAjaxComponent.totalInfoBlockNode.querySelector("a.btn-order-save")), BX.unbindAll(BX.Sale.OrderAjaxComponent.mobileTotalBlockNode.querySelector("a.btn-order-save")), BX.unbindAll(BX.Sale.OrderAjaxComponent.orderSaveBlockNode.querySelector("a")), BX.bind(BX.Sale.OrderAjaxComponent.totalInfoBlockNode.querySelector("a.btn-order-save"), "click", BX.proxy(BX.Sale.OrderAjaxComponent.clickOrderSaveAction, BX.Sale.OrderAjaxComponent)), BX.bind(BX.Sale.OrderAjaxComponent.mobileTotalBlockNode.querySelector("a.btn-order-save"), "click", BX.proxy(BX.Sale.OrderAjaxComponent.clickOrderSaveAction, BX.Sale.OrderAjaxComponent)), BX.bind(BX.Sale.OrderAjaxComponent.orderSaveBlockNode.querySelector("a"), "click", BX.proxy(BX.Sale.OrderAjaxComponent.clickOrderSaveAction, BX.Sale.OrderAjaxComponent))), $(".bx-soa .licence_block label.license").on("click", function() {
                var e = $(this).data("for");
                $(".bx-soa .licence_block label.error").addClass("hidden"), $("input[name=" + e + "]").prop("checked") ? ($("input[name=" + e + "]").prop("checked", ""), BX.Sale.OrderAjaxComponent.state_licence = "") : ($("input[name=" + e + "]").prop("checked", "checked"), BX.Sale.OrderAjaxComponent.state_licence = "checked")
            }), $(".lic_condition a").on("click", function() {
                var e = BX.Sale.OrderAjaxComponent.isValidPropertiesBlock().length;
                BX.Sale.OrderAjaxComponent.activeSectionId && e || BX.Sale.OrderAjaxComponent.animateScrollTo($(".licence_block")[0], 800, 50)
            })), BX.Sale.OrderAjaxComponent.hasOwnProperty("params") && ($(".bx-soa-cart-total .change_link").attr("href", BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET), arOptimusOptions.PRICES.MIN_PRICE && arOptimusOptions.PRICES.MIN_PRICE > Number(BX.Sale.OrderAjaxComponent.result.TOTAL.ORDER_PRICE) && ($('<div class="fademask_ext"></div>').appendTo($("body")), location.href = BX.Sale.OrderAjaxComponent.params.PATH_TO_BASKET)), BX.removeClass(BX.Sale.OrderAjaxComponent.totalInfoBlockNode, "bx-soa-cart-total-fixed"), $(window).scroll(), checkCounters() && "undefined" == typeof BX.Sale.OrderAjaxComponent.oldSaveOrder && "undefined" != typeof BX.Sale.OrderAjaxComponent.saveOrder && (BX.Sale.OrderAjaxComponent.oldSaveOrder = BX.Sale.OrderAjaxComponent.saveOrder, BX.Sale.OrderAjaxComponent.saveOrder = function(e) {
                var t = BX.parseJSON(e);
                t && t.order ? t.order.SHOW_AUTH ? BX.Sale.OrderAjaxComponent.oldSaveOrder(e) : t.order.REDIRECT_URL && t.order.REDIRECT_URL.length && (!t.order.ERROR || BX.util.object_keys(t.order.ERROR).length < 1) && (arMatch = t.order.REDIRECT_URL.match(/ORDER_ID\=[^&=]*/g)) && arMatch.length && (_id = arMatch[0].replace(/ORDER_ID\=/g, "", arMatch[0])) ? $.ajax({
                    url: arOptimusOptions.SITE_DIR + "ajax/check_order.php",
                    dataType: "json",
                    type: "POST",
                    data: {
                        ID: _id
                    },
                    success: function(t) {
                        parseInt(t) ? purchaseCounter(parseInt(t), BX.message("FULL_ORDER"), function(t) {
                            "object" == typeof t && "undefined" != typeof BX.localStorage && BX.localStorage.set("gtm_e_" + _id, t, 60), BX.Sale.OrderAjaxComponent.oldSaveOrder(e)
                        }) : BX.Sale.OrderAjaxComponent.oldSaveOrder(e)
                    },
                    error: function() {
                        BX.Sale.OrderAjaxComponent.oldSaveOrder(e)
                    }
                }) : BX.Sale.OrderAjaxComponent.oldSaveOrder(e) : BX.Sale.OrderAjaxComponent.oldSaveOrder(e)
            })
        }
        $(".bx-ui-sls-quick-locations.quick-locations").on("click", function() {
            $(this).siblings().removeClass("active"), $(this).addClass("active")
        })
    }
}), funcDefined("basketActions") || (basketActions = function() {
    if (arOptimusOptions.PAGES.BASKET_PAGE) {
        if (checkMinPrice(), location.hash) {
            var e = location.hash.substring(1);
            $("#basket_toolbar_button_" + e).length && $("#basket_toolbar_button_" + e).trigger("click")
        }
        $(".bx_sort_container").append('<div class="top_control basket_sort"><span class="delete_all button grey_br transparent remove_all_basket">' + BX.message("BASKET_CLEAR_ALL_BUTTON") + "</span></div>"), "Y" == arOptimusOptions.THEME.SHOW_BASKET_PRINT && $(".bx_sort_container .top_control").prepend('<span class="basket_print button grey_br transparent">' + BX.message("BASKET_PRINT_BUTTON") + "</span>"), $(".bx_sort_container .top_control .delete_all").data("type", $(".bx_sort_container a.current").index()), $(".bx_ordercart .bx_ordercart_coupon #coupon").wrap('<div class="input"></div>'), $(".bx_sort_container > a").on("click", function() {
            $(".bx_sort_container .top_control .delete_all").data("type", $(this).index())
        }), $(".basket_print").on("click", function() {
            window.print()
        }), $(".delete_all").on("click", function() {
            if ("N" !== arOptimusOptions.COUNTERS.USE_BASKET_GOALS) {
                var e = {
                    goal: "goal_basket_clear",
                    params: {
                        type: $(this).data("type")
                    }
                };
                BX.onCustomEvent("onCounterGoals", [e])
            }
            $.post(arOptimusOptions.SITE_DIR + "ajax/action_basket.php", "TYPE=" + $(this).data("type") + "&CLEAR_ALL=Y", $.proxy(function(e) {
                location.reload()
            }))
        }), $(".bx_item_list_section .bx_catalog_item").sliceHeight({
            row: ".bx_item_list_slide",
            item: ".bx_catalog_item"
        }), $(document).on("click", ".bx_ordercart_order_pay_center .checkout", function() {
            checkCounters("google") && checkoutCounter(1, "start order")
        }), BX.addCustomEvent("onAjaxSuccess", function() {
            checkMinPrice();
            var e = $.trim($("#warning_message").text());
            $("#basket_items_list .error_text").detach(), "" != e && ($("#warning_message").hide().text(""), $("#basket_items_list").prepend('<div class="error_text">' + e + "</div>"))
        })
    }
}), funcDefined("checkMinPrice") || (checkMinPrice = function() {
    if (arOptimusOptions.PAGES.BASKET_PAGE) {
        var e = $("#allSum_FORMATED").text().replace(/[^0-9\.,]/g, "");
        if (t = parseFloat(e), $("#basket_items").length) {
            var t = 0;
            $("#basket_items tr").each(function() {
                "undefined" != typeof $(this).data("item-price") && $(this).data("item-price") && (t += $(this).data("item-price") * $(this).find("#QUANTITY_INPUT_" + $(this).attr("id")).val())
            })
        }
        $(".catalog_back").length || $(".bx_ordercart_order_pay_center").prepend('<a href="/catalog/" class="catalog_back button transparent big_btn grey_br">' + BX.message("BASKET_CONTINUE_BUTTON") + "</a>"), arOptimusOptions.PRICES.MIN_PRICE ? arOptimusOptions.PRICES.MIN_PRICE > t ? ($(".icon_error_wrapper").length || $(".bx_ordercart_order_pay_center").prepend('<div class="icon_error_wrapper"><div class="icon_error_block">' + BX.message("MIN_ORDER_PRICE_TEXT").replace("#PRICE#", jsPriceFormat(arOptimusOptions.PRICES.MIN_PRICE)) + "</div></div>"), $(".oneclickbuy.fast_order").length && $(".oneclickbuy.fast_order").remove(), $(".bx_ordercart_order_pay .checkout").length && $(".bx_ordercart_order_pay .checkout").remove()) : ($(".icon_error_wrapper").length && $(".icon_error_wrapper").remove(), $(".bx_ordercart_order_pay .checkout").length ? $(".bx_ordercart .bx_ordercart_order_pay .checkout").css("opacity", "1") : $(".bx_ordercart_order_pay_center").append('<a href="javascript:void(0)" onclick="checkOut();" class="checkout" style="opacity: 1;">' + BX.message("BASKET_ORDER_BUTTON") + "</a>"), $(".oneclickbuy.fast_order").length || "Y" != arOptimusOptions.THEME.SHOW_ONECLICKBUY_ON_BASKET_PAGE || $(".bx_ordercart_order_pay_center").append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">' + BX.message("BASKET_QUICK_ORDER_BUTTON") + "</span>")) : ($(".bx_ordercart .bx_ordercart_order_pay .checkout").css("opacity", "1"), $(".oneclickbuy.fast_order").length || "Y" != arOptimusOptions.THEME.SHOW_ONECLICKBUY_ON_BASKET_PAGE || $(".bx_ordercart_order_pay_center").append('<span class="oneclickbuy button big_btn fast_order" onclick="oneClickBuyBasket()">' + BX.message("BASKET_QUICK_ORDER_BUTTON") + "</span>"))
    }
});
var isFrameDataReceived = !1;
"undefined" != typeof window.frameCacheVars ? BX.addCustomEvent("onFrameDataReceived", function(e) {
    initFull(), isFrameDataReceived = !0
}) : $(document).ready(initFull), funcDefined("setHeightBlockSlider") || (setHeightBlockSlider = function() {
    $(document).find(".specials.tab_slider_wrapp").outerWidth();
    $(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").css("height", ""), $(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider .buttons_block").hide(), $(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({
        children: ".item-title"
    }), $(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({
        children: ".item_info"
    }), $(document).find(".specials.tab_slider_wrapp .tabs_content > li.cur").equalize({
        children: ".catalog_item"
    });
    var e = $(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur .tabs_slider li .buttons_block").height(),
        t = 1 * $(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").height(),
        a = t + e + 50;
    $(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").attr("data-unhover", t), $(document).find(".specials.tab_slider_wrapp .tabs_content .tab.cur").attr("data-hover", a), $(document).find(".specials.tab_slider_wrapp .tabs_content").height(t)
}), funcDefined("checkStickyFooter") || (checkStickyFooter = function() {
    try {
        ignoreResize.push(!0), $("#content").css("min-height", "");
        var e = 0;
        $("#content").length && (e = $("#content").offset().top);
        var t = e + $("#content").outerHeight(),
            a = 0;
        $("footer").length && (a = $("footer").offset().top), $("#content").css("min-height", $(window).height() - e - (a - t) - $("footer").outerHeight() + "px"), ignoreResize.pop()
    } catch (i) {
        console.error(i)
    }
});
var timerResize = !1,
    ignoreResize = [];
$(window).resize(function() {
    $("html.print").length || checkStickyFooter(), ignoreResize.length || (timerResize && (clearTimeout(timerResize), timerResize = !1), timerResize = setTimeout(function() {
        BX.onCustomEvent("onWindowResize", !1)
    }, 50))
});
var timerScroll = !1,
    ignoreScroll = [],
    documentScrollTopLast = $(document).scrollTop();
$(window).scroll(function() {
    documentScrollTopLast = $(document).scrollTop(), ignoreScroll.length || (timerScroll && (clearTimeout(timerScroll), timerScroll = !1), timerScroll = setTimeout(function() {
        BX.onCustomEvent("onWindowScroll", !1)
    }, 50))
}), BX.addCustomEvent("onWindowResize", function(e) {
    try {
        if (ignoreResize.push(!0), checkScrollToTop(), checkPopupWidth(), checkCaptchaWidth(), checkFormWidth(), checkFormControlWidth(), touchMenu("ul.menu:not(.opened) > li.menu_item_l1"), touchBasket(".cart:not(.empty_cart) .basket_block .link"), CheckObjectsSizes(), CheckFlexSlider(), initSly(), checkVerticalMobileFilter(), window.matchMedia("(max-width: 768px)").matches && $(".group_description_block.top").length) {
            var t = $(".adaptive_filter").position().top;
            $(".bx_filter.bx_filter_vertical").css({
                top: t + 20
            })
        }
        window.matchMedia("(min-width: 767px)").matches && $(".wrapper_middle_menu.wrap_menu").removeClass("mobile"), window.matchMedia("(max-width: 767px)").matches && $(".wrapper_middle_menu.wrap_menu").addClass("mobile"), $(window).outerWidth() > 600 ? ($("#header ul.menu").removeClass("opened").css("display", ""), $(".authorization-cols").length && ($(".authorization-cols").equalize({
            children: ".col .auth-title",
            reset: !0
        }), $(".authorization-cols").equalize({
            children: ".col .form-block",
            reset: !0
        }))) : ($(".authorization-cols .auth-title").css("height", ""), $(".authorization-cols .form-block").css("height", "")), $("#basket_form").length && $(window).outerWidth() <= 600 && $("#basket_form .tabs_content.basket > li.cur td").each(function() {
            $(this).css("width", "")
        }), $(".front_slider_wrapp").length && $(".extended_pagination li i").each(function() {
            $(this).css({
                borderBottomWidth: $(this).parent("li").outerHeight() / 2,
                borderTopWidth: $(this).parent("li").outerHeight() / 2
            })
        }), setHeightCompany(), $(".bx_filter_section .bx_filter_select_container").each(function() {
            var e = $(this).closest(".bx_filter_parameters_box").attr("property_id");
            $("#smartFilterDropDown" + e).length && $("#smartFilterDropDown" + e).css("max-width", $(this).width())
        })
    } catch (a) {} finally {
        ignoreResize.pop()
    }
}), BX.addCustomEvent("onWindowScroll", function(e) {
    try {
        ignoreScroll.push(!0)
    } catch (t) {} finally {
        ignoreScroll.pop()
    }
}), BX.addCustomEvent("onCounterGoals", function(e) {
    if ("Y" === arOptimusOptions.COUNTERS.USE_YA_COUNTER) {
        var t = arOptimusOptions.COUNTERS.YA_COUNTER_ID;
        if (t = parseInt(t), "object" != typeof e && (e = {
                goal: "undefined"
            }), "string" != typeof e.goal && (e.goal = "undefined"), t) try {
            waitCounter(t, 50, function() {
                var a = window["yaCounter" + t];
                "object" == typeof a && a.reachGoal(e.goal)
            })
        } catch (a) {
            console.error(a)
        } else console.info("Bad counter id!", t)
    }
});
var onCaptchaVerifyinvisible = function(e) {
        $(".g-recaptcha:last").each(function() {
            var t = $(this).attr("data-widgetid");
            "undefined" != typeof t && e && ($(this).closest("form").find(".g-recaptcha-response").val() || $(this).closest("form").find(".g-recaptcha-response").val(e), $("iframe[src*=recaptcha]").length && $("iframe[src*=recaptcha]").each(function() {
                var e = $(this).parent().parent();
                e.hasClass("grecaptcha-badge") || e.remove()
            }), $(this).closest("form").submit())
        })
    },
    onCaptchaVerifynormal = function(e) {
        $(".g-recaptcha").each(function() {
            var e = $(this).attr("data-widgetid");
            "undefined" != typeof e && "" != grecaptcha.getResponse(e) && $(this).closest("form").find(".recaptcha").valid()
        })
    };
BX.addCustomEvent("onSubmitForm", function(e) {
    try {
        return window.renderRecaptchaById && window.asproRecaptcha && window.asproRecaptcha.key ? ("invisible" == window.asproRecaptcha.params.recaptchaSize && "undefined" != typeof grecaptcha ? $(e.form).find(".g-recaptcha-response").val() ? e.form.submit() : grecaptcha.execute($(e.form).find(".g-recaptcha").data("widgetid")) : e.form.submit(), !0) : (e.form.submit(), !0)
    } catch (t) {
        return console.error(t), !0
    }
});